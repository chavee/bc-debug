var Alloy=require("/alloy"),
Backbone=Alloy.Backbone,
_=Alloy._;




function __processArg(obj,key){
var arg=null;



return obj&&(arg=obj[key]||null),arg;
}

function Controller(){var _Mathfloor=













































































































































































































































































Math.floor;function resetStateBeacon(){Ti.App.Properties.setString("inetBeaconData_major",null),Ti.App.Properties.setString("inetBeaconData_minor",null),Ti.App.Properties.setString("inetBeaconData_uuid",null)}function setStateBeacon(uuid,minor,major){Ti.App.Properties.setString("inetBeaconData_major",major),Ti.App.Properties.setString("inetBeaconData_minor",minor),Ti.App.Properties.setString("inetBeaconData_uuid",uuid)}function isSameStateBefore(uuid,minor,major){return uuid==Ti.App.Properties.getString("inetBeaconData_uuid")&&major==Ti.App.Properties.getString("inetBeaconData_major")&&minor==Ti.App.Properties.getString("inetBeaconData_minor")}function isInterestedRegion(rssi){tag="isInterestRegion:";let min_rssi=-96;return!(-96>=rssi)}function beaconStartScan(){if(resetStateBeacon(),!0){var permissions=["android.permission.ACCESS_FINE_LOCATION"];Ti.Android.requestPermissions(permissions,function(e){e.success?console.log("allow location success"):console.log("not allow location")}),console.log("after check perm:",_Mathfloor(Date.now()));


var isEnterRegion=!1;
androidEntered=function(e){
let tag="androidEntered:";
console.log("androidEntered:","entered region identifer: "+e.identifier),
console.log("androidEntered:",e),
isEnterRegion=!0,
alert("androidEntered:Enter");


},


androidBeaconProximityCallback=function(e){
let tag="proxCallback:";
if(isEnterRegion){












if(console.log(tag,"identifer: "+e.identifier),console.log(tag,"uuid: "+e.uuid),console.log(tag,"major: "+e.major),console.log(tag,"minor: "+e.minor),console.log(tag,"proximity: "+e.proximity),console.log(tag,"accuracy: "+e.accuracy),console.log(tag,"rssi: "+e.rssi),console.log(tag,"power: "+e.power),alert("proxCallback:minor:"+e.minor+", prox:"+e.proximity+", rssi:"+e.rssi+", accuracy:"+e.accuracy),!isInterestedRegion(e.rssi))



return console.log("Too far..."),void alert("Too far...rssi:"+e.rssi);


if(isSameStateBefore(e.uuid,e.major,e.minor))


return console.log(tag,"Same beacon"),void(isConfirmExit=!1);


setStateBeacon(e.uuid,e.major,e.minor),
alert(
"proxCallback:putApi->"+e.uuid+" Major: "+e.major+" Minor: "+e.minor+" prox:"+e.proximity),


putApi(e.major,e.minor);
var my_text=" "+e.major+", "+e.minor;
my_text=Ti.App.Properties.getString("f_beacon")+my_text,
Ti.App.Properties.setString("f_beacon",my_text),
isEnterRegion=!1;
}
};var


handle=null,
isConfirmExit=!1;
androidExited=function(e){



if(isConfirmExit=!0,console.log("exited region identifer: "+e.identifier),null!==Ti.App.Properties.getString("inetBeaconData_uuid")&&null==handle){
var countExit=0;
handle=setInterval(function(){























return console.log("isConfirmExit: "+isConfirmExit),60<countExit&&isConfirmExit?(alert("Exit uuid: "+Ti.App.Properties.getString("inetBeaconData_uuid")+"  Major: "+Ti.App.Properties.getString("inetBeaconData_major")+"  Minor: "+Ti.App.Properties.getString("inetBeaconData_minor")),resetStateBeacon(),clearInterval(handle),handle=null,console.log("it's really exit "+handle)):!isConfirmExit&&(clearInterval(handle),handle=null,console.log("it's not exit "+handle)),countExit++,void console.log("count: "+countExit);
},1e3);
}
},

androidBindingCallback=function(e){
tag="androidBindingCallback: ",
console.log(tag,e);
};var

inBeconRange=function(e){
var tag="beaconRanges: ";
console.log("beaconRanges: ","I am in the "+e.identifier+" region"),
console.log("beaconRanges: ","I see "+e.beacons.length+" beacons in this region:"),
console.log("beaconRanges: ","----------------"),
e.beacons.forEach(function(beacon,index){
console.log("beaconRanges: ","Beacon number: "+index),
console.log("beaconRanges: ","uuid: "+beacon.uuid),
console.log("beaconRanges: ","major: "+beacon.major),
console.log("beaconRanges: ","minor: "+beacon.minor),
console.log("beaconRanges: ","proximity: "+beacon.proximity),
console.log("beaconRanges: ","accuracy: "+beacon.accuracy),
console.log("beaconRanges: ","rssi: "+beacon.rssi),
console.log("beaconRanges: ","power: "+beacon.power),
console.log("----------------");
});
},

regionState=function(e){
var tag="regionState: ";
console.log("regionState: ","identifer: "+e.regionState);
};

BLE.addEventListener("enteredRegion",androidEntered),
BLE.addEventListener("exitedRegion",androidExited),
BLE.addEventListener("beaconProximity",androidBeaconProximityCallback),
BLE.addEventListener("onIBeaconServiceConnect",androidBindingCallback),
BLE.addEventListener("beaconRanges",inBeconRange),
BLE.addEventListener("determinedRegionState",regionState),

console.log("add evnt complete:",_Mathfloor(Date.now()));var







when_ready,
not_ready_count=0;

BLE.bindBeaconService(),

when_ready=setInterval(function(){return(
BLE.isReady()?(







Ti.API.info("Try",not_ready_count,"time, ","Okay! Module is ready!"),


BLE.checkAvailability()?void(





BLE.setBackgroundMode(!1),
BLE.setScanPeriods({
foregroundScanPeriod:5e3,
foregroundBetweenScanPeriod:200,
backgroundScanPeriod:5e3,
backgroundBetweenScanPeriod:200}),


BLE.startMonitoringForRegion({
identifier:beaconIdentifier,
uuid:beaconUUID}),


clearInterval(when_ready),
when_ready=null):void alert("It's not support in your device!")):(console.log("not_ready_count=",not_ready_count),console.log("BLE Not ready"),void not_ready_count++));
},1e3);

var monit;

monit=setInterval(function(){

if(!1)


return console.log("App in background. Stop scan."),void BLE.stopScan();

});


}else if(iosDidChangeAuthorization=(e)=>{switch(Ti.API.info("didChangeAuthorization"),e.state){case BLE.LOCATION_MANAGER_AUTHORIZATION_STATUS_AUTHORIZED_ALWAYS:alert("Manager authorization is always");break;case BLE.LOCATION_MANAGER_AUTHORIZATION_STATUS_AUTHORIZED_WHEN_IN_USE:alert("Manager authorization is when in use");break;case BLE.LOCATION_MANAGER_AUTHORIZATION_STATUS_DENIED:alert("Manager authorization is denied");break;case BLE.LOCATION_MANAGER_AUTHORIZATION_STATUS_NOT_DETERMINED:alert("Manager authorization is not determined");break;case BLE.LOCATION_MANAGER_AUTHORIZATION_STATUS_RESTRICTED:alert("Manager authorization is powered restricted");break;default:alert("Unknown");}},iosDidRangeBeacons=(e)=>{Ti.API.info("didRangeBeacons");var becaons=e.beacons;if(0===becaons.length)return console.log("No beacon in range"),void(null!==Ti.App.Properties.getString("inetBeaconData_uuid")&&(alert("Exit uuid: "+Ti.App.Properties.getString("inetBeaconData_uuid")+"  Major: "+Ti.App.Properties.getString("inetBeaconData_major")+"  Minor: "+Ti.App.Properties.getString("inetBeaconData_minor")),resetStateBeacon()));var proximity=becaons[0].proximity,accuracy=becaons[0].accuracy,major=becaons[0].major,minor=becaons[0].minor,haveCase=!0;(isInterestedRegion(proximity)||console.log("Too far..."),!isSameStateBefore(e.region.uuid,major,minor))&&(proximity===BLE.BEACON_PROXIMITY_UNKNOWN?alert("Beacon Location : UNKNOWN"):proximity===BLE.BEACON_PROXIMITY_IMMEDIATE?(setStateBeacon(e.region.uuid,major,minor),console.log(e.region.uuid+" Major: "+major+" Minor: "+minor),alert("IMMEDIATE uuid: "+e.region.uuid+"  Major: "+major+"  Minor: "+minor+"  Approx: "+accuracy+"m)")):proximity===BLE.BEACON_PROXIMITY_NEAR?(setStateBeacon(e.region.uuid,major,minor),console.log(e.region.uuid+" Major: "+major+" Minor: "+minor),alert("NEAR uuid: "+e.region.uuid+"  Major: "+major+"  Minor: "+minor+"  Approx: "+accuracy+"m)")):proximity===BLE.BEACON_PROXIMITY_FAR?(setStateBeacon(e.region.uuid,major,minor),console.log(e.region.uuid+" Major: "+major+" Minor: "+minor),alert("FAR uuid: "+e.region.uuid+"  Major: "+major+"  Minor: "+minor+"  Approx: "+accuracy+"m)")):(haveCase=!1,alert("Beacon Location : UNKNOWN")),haveCase&&putApi(major,minor))},null===manager){manager=BLE.createRegionManager(),manager.addEventListener("didChangeAuthorization",iosDidChangeAuthorization),manager.addEventListener("didRangeBeacons",iosDidRangeBeacons);var beaconRegion=BLE.createBeaconRegion({uuid:beaconUUID,identifier:beaconIdentifier});manager.startRegionMonitoring({beaconRegion:beaconRegion}),manager.startRangingBeaconsInRegion({beaconRegion:beaconRegion})}
}

function beaconStopScan(){
resetStateBeacon(),1?(







BLE.stopMonitoringAllRegions(),
BLE.removeEventListener("enteredRegion",androidEntered),
BLE.removeEventListener("exitedRegion",androidExited),
BLE.removeEventListener("beaconProximity",androidBeaconProximityCallback)):(manager.removeEventListener("didChangeAuthorization",iosDidChangeAuthorization),manager.removeEventListener("didRangeBeacons",iosDidRangeBeacons));

}

function putApi(major,minor){
var xhr=Ti.Network.createHTTPClient();
xhr.onload=function(e){
console.log(this.status),
console.log(this.responseText);
},
xhr.onerror=function(e){
console.log(this.status),
console.log(this.responseText);
},
xhr.timeout=1e4,

xhr.open("PUT","https://beacon-track.inet.co.th"),
xhr.setRequestHeader("X-API-KEY","RvBmll9opEnVZ3aBH6wygN7VXKr7DIYw"),
xhr.setRequestHeader("content-type","application/json");
var params={
uid:Ti.App.Properties.getString("inetBeaconData_cid"),
major:major,
minor:minor};

xhr.send(JSON.stringify(params));
}

function BLEScan(){
if(!1)

console.log("IOS");else


{

if(console.log("Android"),centralManager.isScanning())

return void console.log("Already scanning, please stop scan first!");


var gatt_handle;
gatt_handle=setInterval(function(e){return(
centralManager.didUpdateState==BLE.MANAGER_STATE_POWERED_ON?void(




centralManager.getState()!=BLE.MANAGER_STATE_POWERED_ON&&

console.log("BLE manager needs to be powered on before. Call initialize()."),


console.log("BLE.MANAGER_STATE_POWERED_ON"),

centralManager.startScan(),
console.log("Start BLE"),
clearInterval(gatt_handle),
gatt_handle=null):void console.log("didState=",centralManager.didUpdateState));
},1e3);
}
}













function stopBLE(){
centralManager.isScanning?(
console.log("Stop BLE"),
centralManager.stopScan()):


console.log("No scan session!");

}

function md5_hash(){var
tag="md5_hash",
my_cid=Ti.App.Properties.getString("inetBeaconData_cid");
console.log("md5_hash","cid:",my_cid);
var my_md5=Ti.Utils.md5HexDigest(`b1cf4b7ec203:${my_cid}:32780:1102`);
alert(my_md5);
}if(require("/alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="inet_beacon/beacon",this.args=arguments[0]||{},arguments[0])var __parentSymbol=__processArg(arguments[0],"__parentSymbol"),$model=__processArg(arguments[0],"$model"),__itemTemplate=__processArg(arguments[0],"__itemTemplate");var $=this,exports={},__defers={};exports.destroy=function(){},_.extend($,$.__views);let beaconUUID="5991e161-bb46-432f-9bd8-b271f76f67d9",beaconIdentifier="Morprom";Ti.App.Properties.setString("f_beacon",""),console.log("begin:",_Mathfloor(Date.now()));var BLE=null,GATT=null,centralManager=null,isForeground=!0;1?(BLE=require("com.liferay.beacons"),GATT=require("ti.bluetooth"),centralManager=GATT.createCentralManager()):BLE=require("appcelerator.ble"),console.log("after lode lib:",_Mathfloor(Date.now()));var manager=null,iosDidRangeBeacons=null,iosDidChangeAuthorization=null,androidEntered=null,androidExited=null,androidBeaconProximityCallback=null,gattDidDiscover=function(e){Ti.API.info("didDiscoverPeripheral"),Ti.API.info(e.peripheral.uuids.uuid,"Address:",e.peripheral.address,e.peripheral.name)};centralManager.addEventListener("didDiscoverPeripheral",gattDidDiscover),

exports.beaconStartScan=beaconStartScan,
exports.beaconStopScan=beaconStopScan,
exports.putApi=putApi,
exports.BLEScan=BLEScan,
exports.stopBLE=stopBLE,
exports.md5_hash=md5_hash,









_.extend($,exports);
}

module.exports=Controller;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlbXBsYXRlLmpzIiwiYmVhY29uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLEdBQUEsQ0FBQSxLQUFBLENBQUEsT0FBQSxDQUFBLFFBQUEsQ0FBQTtBQUNBLFFBQUEsQ0FBQSxLQUFBLENBQUEsUUFEQTtBQUVBLENBQUEsQ0FBQSxLQUFBLENBQUEsQ0FGQTs7Ozs7QUFPQSxRQUFBLENBQUEsWUFBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUE7QUFDQSxHQUFBLENBQUEsR0FBQSxDQUFBLElBQUE7Ozs7QUFJQSxNQUhBLENBQUEsR0FHQSxHQUZBLEdBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLEVBQUEsSUFFQSxFQUFBLEdBQUE7QUFDQTs7QUFFQSxRQUFBLENBQUEsVUFBQSxFQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNrT0EsSUFBQSxDQUFBLEtEbE9BLENDVkEsUUFBQSxDQUFBLGdCQUFBLEVBQUEsQ0FDQSxFQUFBLENBQUEsR0FBQSxDQUFBLFVBQUEsQ0FBQSxTQUFBLENBQUEsc0JBQUEsQ0FBQSxJQUFBLENBREEsQ0FFQSxFQUFBLENBQUEsR0FBQSxDQUFBLFVBQUEsQ0FBQSxTQUFBLENBQUEsc0JBQUEsQ0FBQSxJQUFBLENBRkEsQ0FHQSxFQUFBLENBQUEsR0FBQSxDQUFBLFVBQUEsQ0FBQSxTQUFBLENBQUEscUJBQUEsQ0FBQSxJQUFBLENBQ0EsQ0FDQSxRQUFBLENBQUEsY0FBQSxDQUFBLElBQUEsQ0FBQSxLQUFBLENBQUEsS0FBQSxDQUFBLENBQ0EsRUFBQSxDQUFBLEdBQUEsQ0FBQSxVQUFBLENBQUEsU0FBQSxDQUFBLHNCQUFBLENBQUEsS0FBQSxDQURBLENBRUEsRUFBQSxDQUFBLEdBQUEsQ0FBQSxVQUFBLENBQUEsU0FBQSxDQUFBLHNCQUFBLENBQUEsS0FBQSxDQUZBLENBR0EsRUFBQSxDQUFBLEdBQUEsQ0FBQSxVQUFBLENBQUEsU0FBQSxDQUFBLHFCQUFBLENBQUEsSUFBQSxDQUNBLENBQ0EsUUFBQSxDQUFBLGlCQUFBLENBQUEsSUFBQSxDQUFBLEtBQUEsQ0FBQSxLQUFBLENBQUEsT0FFQSxDQUFBLElBQUEsRUFBQSxFQUFBLENBQUEsR0FBQSxDQUFBLFVBQUEsQ0FBQSxTQUFBLENBQUEscUJBQUEsQ0FBQSxFQUNBLEtBQUEsRUFBQSxFQUFBLENBQUEsR0FBQSxDQUFBLFVBQUEsQ0FBQSxTQUFBLENBQUEsc0JBQUEsQ0FEQSxFQUVBLEtBQUEsRUFBQSxFQUFBLENBQUEsR0FBQSxDQUFBLFVBQUEsQ0FBQSxTQUFBLENBQUEsc0JBQUEsQ0FLQSxDQW1CQSxRQUFBLENBQUEsa0JBQUEsQ0FBQSxJQUFBLENBQ0EsQ0FDQSxHQUFBLENBQUEsbUJBREEsQ0FFQSxHQUFBLENBQUEsUUFBQSxDQUFBLENBQUEsRUFBQSxDQUZBLFFBVUEsS0FBQSxJQVZBLENBcUJBLENBWUEsUUFBQSxDQUFBLGVBQUEsRUFBQSxDQUVBLEdBREEsZ0JBQUEsRUFDQSxJQXNKQSxDQUdBLEdBQUEsQ0FBQSxXQUFBLENBQUEsQ0FBQSx5Q0FBQSxDQUFBLENBQ0EsRUFBQSxDQUFBLE9BQUEsQ0FBQSxrQkFBQSxDQUFBLFdBQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQSxDQUNBLENBQUEsQ0FBQSxPQURBLENBRUEsT0FBQSxDQUFBLEdBQUEsQ0FBQSx3QkFBQSxDQUZBLENBSUEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxvQkFBQSxDQUVBLENBTkEsQ0FKQSxDQVlBLE9BQUEsQ0FBQSxHQUFBLENBQUEsbUJBQUEsQ0FBQSxXQUFBLElBQUEsQ0FBQSxHQUFBLEVBQUEsQ0FBQSxDQVpBOzs7QUFlQSxHQUFBLENBQUEsYUFBQSxHQUFBO0FBQ0EsY0FBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBO0FBQ0EsR0FBQSxDQUFBLEdBQUEsQ0FBQSxpQkFBQTtBQUNBLE9BQUEsQ0FBQSxHQUFBLG1CQUFBLDZCQUFBLENBQUEsQ0FBQSxVQUFBLENBRkE7QUFHQSxPQUFBLENBQUEsR0FBQSxtQkFBQSxDQUFBLENBSEE7QUFJQSxhQUFBLEdBSkE7QUFLQSxLQUFBLHdCQUxBOzs7QUFRQSxDQXhCQTs7O0FBMkJBLDhCQUFBLENBQUEsU0FBQSxDQUFBLENBQUE7QUFDQSxHQUFBLENBQUEsR0FBQSxDQUFBLGVBQUE7QUFDQSxHQUFBLGFBQUEsQ0FBQTs7Ozs7Ozs7Ozs7OztBQWFBLEdBWkEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsY0FBQSxDQUFBLENBQUEsVUFBQSxDQVlBLENBWEEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsU0FBQSxDQUFBLENBQUEsSUFBQSxDQVdBLENBVkEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsVUFBQSxDQUFBLENBQUEsS0FBQSxDQVVBLENBVEEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsVUFBQSxDQUFBLENBQUEsS0FBQSxDQVNBLENBUkEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsY0FBQSxDQUFBLENBQUEsU0FBQSxDQVFBLENBUEEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsYUFBQSxDQUFBLENBQUEsUUFBQSxDQU9BLENBTkEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsU0FBQSxDQUFBLENBQUEsSUFBQSxDQU1BLENBTEEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsVUFBQSxDQUFBLENBQUEsS0FBQSxDQUtBLENBSkEsS0FBQSxDQUFBLHNCQUFBLENBQUEsQ0FBQSxLQUFBLENBQUEsU0FBQSxDQUFBLENBQUEsQ0FBQSxTQUFBLENBQUEsU0FBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsYUFBQSxDQUFBLENBQUEsQ0FBQSxRQUFBLENBSUEsQ0FBQSxDQUFBLGtCQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBQTs7OztBQUlBLE1BRkEsQ0FBQSxPQUFBLENBQUEsR0FBQSxDQUFBLFlBQUEsQ0FFQSxLQURBLENBQUEsS0FBQSxDQUFBLGtCQUFBLENBQUEsQ0FBQSxJQUFBLENBQ0E7OztBQUdBLEdBQUEsaUJBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFBLENBQUEsQ0FBQSxLQUFBLENBQUEsQ0FBQSxDQUFBLEtBQUEsQ0FBQTs7O0FBR0EsTUFGQSxDQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLGFBQUEsQ0FFQSxNQURBLGFBQUEsR0FDQTs7O0FBR0EsY0FBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQSxDQUFBLEtBQUEsQ0FBQSxDQUFBLENBQUEsS0FBQSxDQTFCQTtBQTJCQSxLQUFBO0FBQ0Esd0JBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBQSxVQUFBLENBQUEsQ0FBQSxDQUFBLEtBQUEsQ0FBQSxVQUFBLENBQUEsQ0FBQSxDQUFBLEtBQUEsQ0FBQSxRQUFBLENBQUEsQ0FBQSxDQUFBLFNBREEsQ0EzQkE7OztBQStCQSxNQUFBLENBQUEsQ0FBQSxDQUFBLEtBQUEsQ0FBQSxDQUFBLENBQUEsS0FBQSxDQS9CQTtBQWdDQSxHQUFBLENBQUEsT0FBQSxDQUFBLElBQUEsQ0FBQSxDQUFBLEtBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQSxDQUFBLEtBQUE7QUFDQSxPQUFBLENBQUEsRUFBQSxDQUFBLEdBQUEsQ0FBQSxVQUFBLENBQUEsU0FBQSxDQUFBLFVBQUEsRUFBQSxPQWpDQTtBQWtDQSxFQUFBLENBQUEsR0FBQSxDQUFBLFVBQUEsQ0FBQSxTQUFBLENBQUEsVUFBQSxDQUFBLE9BQUEsQ0FsQ0E7QUFtQ0EsYUFBQSxHQW5DQTtBQW9DQTtBQUNBLENBbEVBOzs7QUFxRUEsTUFBQSxDQUFBLElB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LENBQUEsMEJBekNBLEVBMkNBLGNBQUEsQ0FBQSxDQUFBLENBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxLQUFBLENBQUEsS0FBQSxDQTNDQSxDQTRDQSxPQUFBLENBQUEsR0FBQSxDQUFBLENBQUEsQ0FBQSxNQUFBLENBQUEsSUFBQSxDQUFBLFVBQUEsQ0FBQSxLQUFBLENBQUEsVUFBQSxDQUFBLEtBQUEsQ0E1Q0EsQ0E2Q0EsS0FBQSxDQUNBLG1CQUNBLENBQUEsQ0FBQSxNQUFBLENBQUEsSUFEQSxDQUVBLFdBRkEsQ0FHQSxLQUhBLENBSUEsV0FKQSxDQUtBLEtBTEEsQ0FNQSxZQU5BLENBT0EsUUFQQSxDQVFBLElBVEEsQ0E3Q0EsRUFvQ0EsU0FwQ0EsR0EwREEsR0FBQSxDQUFBLHFCQTFEQSxFQTJEQSxjQUFBLENBQUEsQ0FBQSxDQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsS0FBQSxDQUFBLEtBQUEsQ0EzREEsQ0E0REEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBLENBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxVQUFBLENBQUEsS0FBQSxDQUFBLFVBQUEsQ0FBQSxLQUFBLENBNURBLENBNkRBLEtBQUEsQ0FDQSxjQUNBLENBQUEsQ0FBQSxNQUFBLENBQUEsSUFEQSxDQUVBLFdBRkEsQ0FHQSxLQUhBLENBSUEsV0FKQSxDQUtBLEtBTEEsQ0FNQSxZQU5BLENBT0EsUUFQQSxDQVFBLElBVEEsQ0E3REEsRUFvQ0EsU0FwQ0EsR0EwRUEsR0FBQSxDQUFBLG9CQTFFQSxFQTJFQSxjQUFBLENBQUEsQ0FBQSxDQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsS0FBQSxDQUFBLEtBQUEsQ0EzRUEsQ0E0RUEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBLENBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxVQUFBLENBQUEsS0FBQSxDQUFBLFVBQUEsQ0FBQSxLQUFBLENBNUVBLENBNkVBLEtBQUEsQ0FDQSxhQUNBLENBQUEsQ0FBQSxNQUFBLENBQUEsSUFEQSxDQUVBLFdBRkEsQ0FHQSxLQUhBLENBSUEsV0FKQSxDQUtBLEtBTEEsQ0FNQSxZQU5BLENBT0EsUUFQQSxDQVFBLElBVEEsQ0E3RUEsR0EyRkEsUUFBQSxHQTNGQSxDQTRGQSxLQUFBLENBQUEsMkJBQUEsQ0E1RkEsRUFnR0EsUUFoR0EsRUFpR0EsTUFBQSxDQUFBLEtBQUEsQ0FBQSxLQUFBLENBakdBLENBb0dBLENBRUEsQ0FBQSxJQUFBLEdBQUEsT0FBQSxDQUFBLENBQ0EsT0FBQSxDQUFBLEdBQUEsQ0FBQSxtQkFBQSxFQURBLENBRUEsT0FBQSxDQUFBLGdCQUFBLENBQ0Esd0JBREEsQ0FFQSx5QkFGQSxDQUZBLENBTUEsT0FBQSxDQUFBLGdCQUFBLENBQUEsaUJBQUEsQ0FBQSxrQkFBQSxDQU5BLENBUUEsR0FBQSxDQUFBLFlBQUEsQ0FBQSxHQUFBLENBQUEsa0JBQUEsQ0FBQSxDQUNBLElBQUEsQ0FBQSxVQURBLENBSUEsVUFBQSxDQUFBLGdCQUpBLENBQUEsQ0FBQSxDQU1BLE9BQUEsQ0FBQSxxQkFBQSxDQUFBLENBQ0EsWUFBQSxDQUFBLFlBREEsQ0FBQSxDQWRBLENBaUJBLE9BQUEsQ0FBQSwyQkFBQSxDQUFBLENBQ0EsWUFBQSxDQUFBLFlBREEsQ0FBQSxDQUdBO0FBNE1BOztBQUVBLFFBQUEsQ0FBQSxjQUFBLEVBQUE7QUFDQSxnQkFBQSxFQURBOzs7Ozs7OztBQVNBLEdBQUEsQ0FBQSx3QkFBQSxFQVRBO0FBVUEsR0FBQSxDQUFBLG1CQUFBLENBQUEsZUFBQSxDQUFBLGNBQUEsQ0FWQTtBQVdBLEdBQUEsQ0FBQSxtQkFBQSxDQUFBLGNBQUEsQ0FBQSxhQUFBLENBWEE7QUFZQSxHQUFBLENBQUEsbUJBQUEsQ0FBQSxpQkFBQSxDQUFBLDhCQUFBLENBWkEsR0FHQSxPQUFBLENBQUEsbUJBQUEsQ0FDQSx3QkFEQSxDQUVBLHlCQUZBLENBSEEsQ0FPQSxPQUFBLENBQUEsbUJBQUEsQ0FBQSxpQkFBQSxDQUFBLGtCQUFBLENBUEE7O0FBY0E7O0FBRUEsUUFBQSxDQUFBLE1BQUEsQ0FBQSxLQUFBLENBQUEsS0FBQSxDQUFBO0FBQ0EsR0FBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBLENBQUEsT0FBQSxDQUFBLGdCQUFBLEVBQUE7QUFDQSxHQUFBLENBQUEsTUFBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBO0FBQ0EsT0FBQSxDQUFBLEdBQUEsQ0FBQSxLQUFBLE1BQUEsQ0FEQTtBQUVBLE9BQUEsQ0FBQSxHQUFBLENBQUEsS0FBQSxZQUFBLENBRkE7QUFHQSxDQUxBO0FBTUEsR0FBQSxDQUFBLE9BQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQTtBQUNBLE9BQUEsQ0FBQSxHQUFBLENBQUEsS0FBQSxNQUFBLENBREE7QUFFQSxPQUFBLENBQUEsR0FBQSxDQUFBLEtBQUEsWUFBQSxDQUZBO0FBR0EsQ0FUQTtBQVVBLEdBQUEsQ0FBQSxPQUFBLENBQUEsR0FWQTs7QUFZQSxHQUFBLENBQUEsSUFBQSxDQUFBLEtBQUEsQ0FBQSxpQ0FBQSxDQVpBO0FBYUEsR0FBQSxDQUFBLGdCQUFBLENBQUEsV0FBQSxDQUFBLGtDQUFBLENBYkE7QUFjQSxHQUFBLENBQUEsZ0JBQUEsQ0FBQSxjQUFBLENBQUEsa0JBQUEsQ0FkQTtBQWVBLEdBQUEsQ0FBQSxNQUFBLENBQUE7QUFDQSxHQUFBLENBQUEsRUFBQSxDQUFBLEdBQUEsQ0FBQSxVQUFBLENBQUEsU0FBQSxDQUFBLG9CQUFBLENBREE7QUFFQSxLQUFBLENBQUEsS0FGQTtBQUdBLEtBQUEsQ0FBQSxLQUhBLENBQUE7O0FBS0EsR0FBQSxDQUFBLElBQUEsQ0FBQSxJQUFBLENBQUEsU0FBQSxDQUFBLE1BQUEsQ0FBQSxDQXBCQTtBQXFCQTs7QUFFQSxRQUFBLENBQUEsT0FBQSxFQUFBO0FBQ0E7O0FBRUEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxLQUFBLENBRkE7OztBQUtBOztBQUVBLEdBREEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxTQUFBLENBQ0EsQ0FBQSxjQUFBLENBQUEsVUFBQSxFQUFBOztBQUVBLFdBREEsQ0FBQSxPQUFBLENBQUEsR0FBQSxDQUFBLDJDQUFBLENBQ0E7OztBQUdBLEdBQUEsQ0FBQSxXQUFBO0FBQ0EsV0FBQSxDQUFBLFdB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QUFBLENBQUEsR0FBQSxDQUFBLGlCQUFBLENBQUEsV0FBQSxJQUFBLENBQUEsR0FBQSxFQUFBLENBQUEsQ0RwREEsSUNzREEsQ0FBQSxPQUFBLENBQUEsSUR0REEsQ0N1REEsa0JBQUEsQ0FBQSxJRHZEQSxDQ3dEQSx5QkFBQSxDQUFBLElEeERBLENDMERBLGNBQUEsQ0FBQSxJRDFEQSxDQzJEQSxhQUFBLENBQUEsSUQzREEsQ0M0REEsOEJBQUEsQ0FBQSxJRDVEQSxDQzRlQSxlQUFBLENBQUEsU0FBQSxDQUFBLENBQUEsQ0FDQSxFQUFBLENBQUEsR0FBQSxDQUFBLElBQUEsQ0FBQSx1QkFBQSxDQURBLENBRUEsRUFBQSxDQUFBLEdBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQSxDQUFBLFVBQUEsQ0FBQSxLQUFBLENBQUEsSUFBQSxDQUFBLFVBQUEsQ0FBQSxDQUFBLENBQUEsVUFBQSxDQUFBLE9BQUEsQ0FBQSxDQUFBLENBQUEsVUFBQSxDQUFBLElBQUEsQ0FNQSxDRHBmQSxDQ3NmQSxjQUFBLENBQUEsZ0JBQUEsQ0FBQSx1QkFBQSxDQUFBLGVBQUEsQ0R0ZkE7O0FDMGdCQSxPQUFBLENBQUEsZUFBQSxDQUFBLGVEMWdCQTtBQzJnQkEsT0FBQSxDQUFBLGNBQUEsQ0FBQSxjRDNnQkE7QUM0Z0JBLE9BQUEsQ0FBQSxNQUFBLENBQUEsTUQ1Z0JBO0FDNmdCQSxPQUFBLENBQUEsT0FBQSxDQUFBLE9EN2dCQTtBQzhnQkEsT0FBQSxDQUFBLE9BQUEsQ0FBQSxPRDlnQkE7QUMrZ0JBLE9BQUEsQ0FBQSxRQUFBLENBQUEsUUQvZ0JBOzs7Ozs7Ozs7O0FBdUNBLENBQUEsQ0FBQSxNQUFBLENBQUEsQ0FBQSxDQUFBLE9BQUEsQ0F2Q0E7QUF3Q0E7O0FBRUEsTUFBQSxDQUFBLE9BQUEsQ0FBQSxVIiwic291cmNlc0NvbnRlbnQiOlsidmFyIEFsbG95ID0gcmVxdWlyZSgnL2FsbG95JyksXG5cdEJhY2tib25lID0gQWxsb3kuQmFja2JvbmUsXG5cdF8gPSBBbGxveS5fO1xuXG5cblxuXG5mdW5jdGlvbiBfX3Byb2Nlc3NBcmcob2JqLCBrZXkpIHtcblx0dmFyIGFyZyA9IG51bGw7XG5cdGlmIChvYmopIHtcblx0XHRhcmcgPSBvYmpba2V5XSB8fCBudWxsO1xuXHR9XG5cdHJldHVybiBhcmc7XG59XG5cbmZ1bmN0aW9uIENvbnRyb2xsZXIoKSB7XG5cdFxuXHRyZXF1aXJlKCcvYWxsb3kvY29udHJvbGxlcnMvJyArICdCYXNlQ29udHJvbGxlcicpLmFwcGx5KHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuXHR0aGlzLl9fY29udHJvbGxlclBhdGggPSAnaW5ldF9iZWFjb24vYmVhY29uJztcblx0dGhpcy5hcmdzID0gYXJndW1lbnRzWzBdIHx8IHt9O1xuXG5cdGlmIChhcmd1bWVudHNbMF0pIHtcblx0XHR2YXIgX19wYXJlbnRTeW1ib2wgPSBfX3Byb2Nlc3NBcmcoYXJndW1lbnRzWzBdLCAnX19wYXJlbnRTeW1ib2wnKTtcblx0XHR2YXIgJG1vZGVsID0gX19wcm9jZXNzQXJnKGFyZ3VtZW50c1swXSwgJyRtb2RlbCcpO1xuXHRcdHZhciBfX2l0ZW1UZW1wbGF0ZSA9IF9fcHJvY2Vzc0FyZyhhcmd1bWVudHNbMF0sICdfX2l0ZW1UZW1wbGF0ZScpO1xuXHR9XG5cdHZhciAkID0gdGhpcztcblx0dmFyIGV4cG9ydHMgPSB7fTtcblx0dmFyIF9fZGVmZXJzID0ge307XG5cblx0Ly8gR2VuZXJhdGVkIGNvZGUgdGhhdCBtdXN0IGJlIGV4ZWN1dGVkIGJlZm9yZSBhbGwgVUkgYW5kL29yXG5cdC8vIGNvbnRyb2xsZXIgY29kZS4gT25lIGV4YW1wbGUgaXMgYWxsIG1vZGVsIGFuZCBjb2xsZWN0aW9uXG5cdC8vIGRlY2xhcmF0aW9ucyBmcm9tIG1hcmt1cC5cblx0XG5cblx0Ly8gR2VuZXJhdGVkIFVJIGNvZGVcblx0ZXhwb3J0cy5kZXN0cm95ID0gZnVuY3Rpb24gKCkge307XG5cblx0Ly8gbWFrZSBhbGwgSURlZCBlbGVtZW50cyBpbiAkLl9fdmlld3MgYXZhaWxhYmxlIHJpZ2h0IG9uIHRoZSAkIGluIGFcblx0Ly8gY29udHJvbGxlcidzIGludGVybmFsIGNvZGUuIEV4dGVybmFsbHkgdGhlIElEZWQgZWxlbWVudHMgd2lsbFxuXHQvLyBiZSBhY2Nlc3NlZCB3aXRoIGdldFZpZXcoKS5cblx0Xy5leHRlbmQoJCwgJC5fX3ZpZXdzKTtcblxuXHQvLyBDb250cm9sbGVyIGNvZGUgZGlyZWN0bHkgZnJvbSB0aGUgZGV2ZWxvcGVyJ3MgY29udHJvbGxlciBmaWxlXG5cdF9fTUFQTUFSS0VSX0NPTlRST0xMRVJfQ09ERV9fXG5cblx0Ly8gR2VuZXJhdGVkIGNvZGUgdGhhdCBtdXN0IGJlIGV4ZWN1dGVkIGFmdGVyIGFsbCBVSSBhbmRcblx0Ly8gY29udHJvbGxlciBjb2RlLiBPbmUgZXhhbXBsZSBkZWZlcnJlZCBldmVudCBoYW5kbGVycyB3aG9zZVxuXHQvLyBmdW5jdGlvbnMgYXJlIG5vdCBkZWZpbmVkIHVudGlsIGFmdGVyIHRoZSBjb250cm9sbGVyIGNvZGVcblx0Ly8gaXMgZXhlY3V0ZWQuXG5cdFxuXG5cdC8vIEV4dGVuZCB0aGUgJCBpbnN0YW5jZSB3aXRoIGFsbCBmdW5jdGlvbnMgYW5kIHByb3BlcnRpZXNcblx0Ly8gZGVmaW5lZCBvbiB0aGUgZXhwb3J0cyBvYmplY3QuXG5cdF8uZXh0ZW5kKCQsIGV4cG9ydHMpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbnRyb2xsZXI7XG4iLCIvLyBsZXQgYmVhY29uVVVJRCA9IFwiYzhhOTRmNDItM2NkNS00ODNhLThhZGMtOTc0NzMxOTdiOGI0XCI7XG5sZXQgYmVhY29uVVVJRCA9IFwiNTk5MWUxNjEtYmI0Ni00MzJmLTliZDgtYjI3MWY3NmY2N2Q5XCI7XG5sZXQgYmVhY29uSWRlbnRpZmllciA9IFwiTW9ycHJvbVwiO1xuVGkuQXBwLlByb3BlcnRpZXMuc2V0U3RyaW5nKFwiZl9iZWFjb25cIiwgXCJcIik7XG5cbmZ1bmN0aW9uIHJlc2V0U3RhdGVCZWFjb24oKSB7XG4gIFRpLkFwcC5Qcm9wZXJ0aWVzLnNldFN0cmluZyhcImluZXRCZWFjb25EYXRhX21ham9yXCIsIG51bGwpO1xuICBUaS5BcHAuUHJvcGVydGllcy5zZXRTdHJpbmcoXCJpbmV0QmVhY29uRGF0YV9taW5vclwiLCBudWxsKTtcbiAgVGkuQXBwLlByb3BlcnRpZXMuc2V0U3RyaW5nKFwiaW5ldEJlYWNvbkRhdGFfdXVpZFwiLCBudWxsKTtcbn1cbmZ1bmN0aW9uIHNldFN0YXRlQmVhY29uKHV1aWQsIG1pbm9yLCBtYWpvcikge1xuICBUaS5BcHAuUHJvcGVydGllcy5zZXRTdHJpbmcoXCJpbmV0QmVhY29uRGF0YV9tYWpvclwiLCBtYWpvcik7XG4gIFRpLkFwcC5Qcm9wZXJ0aWVzLnNldFN0cmluZyhcImluZXRCZWFjb25EYXRhX21pbm9yXCIsIG1pbm9yKTtcbiAgVGkuQXBwLlByb3BlcnRpZXMuc2V0U3RyaW5nKFwiaW5ldEJlYWNvbkRhdGFfdXVpZFwiLCB1dWlkKTtcbn1cbmZ1bmN0aW9uIGlzU2FtZVN0YXRlQmVmb3JlKHV1aWQsIG1pbm9yLCBtYWpvcikge1xuICBpZiAoXG4gIHV1aWQgPT0gVGkuQXBwLlByb3BlcnRpZXMuZ2V0U3RyaW5nKFwiaW5ldEJlYWNvbkRhdGFfdXVpZFwiKSAmJlxuICBtYWpvciA9PSBUaS5BcHAuUHJvcGVydGllcy5nZXRTdHJpbmcoXCJpbmV0QmVhY29uRGF0YV9tYWpvclwiKSAmJlxuICBtaW5vciA9PSBUaS5BcHAuUHJvcGVydGllcy5nZXRTdHJpbmcoXCJpbmV0QmVhY29uRGF0YV9taW5vclwiKSlcbiAge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuY29uc29sZS5sb2coXCJiZWdpbjpcIiwgTWF0aC5mbG9vcihEYXRlLm5vdygpKSk7XG52YXIgQkxFID0gbnVsbDtcbnZhciBHQVRUID0gbnVsbDtcbnZhciBjZW50cmFsTWFuYWdlciA9IG51bGw7XG4vLyB2YXIgYW5kcm9pZFBsYXRmb3JtVG9vbHMgPSByZXF1aXJlKCdiZW5jb2RpbmcuYW5kcm9pZC50b29scycpLmNyZWF0ZVBsYXRmb3JtKCk7XG52YXIgaXNGb3JlZ3JvdW5kID0gdHJ1ZTtcblxuaWYgKE9TX0lPUylcbntcbiAgQkxFID0gcmVxdWlyZShcImFwcGNlbGVyYXRvci5ibGVcIik7XG59IGVsc2VcbntcbiAgQkxFID0gcmVxdWlyZShcImNvbS5saWZlcmF5LmJlYWNvbnNcIik7XG4gIEdBVFQgPSByZXF1aXJlKCd0aS5ibHVldG9vdGgnKTtcbiAgY2VudHJhbE1hbmFnZXIgPSBHQVRULmNyZWF0ZUNlbnRyYWxNYW5hZ2VyKCk7XG59XG5cbmZ1bmN0aW9uIGlzSW50ZXJlc3RlZFJlZ2lvbihyc3NpKVxue1xuICB0YWcgPSBcImlzSW50ZXJlc3RSZWdpb246XCI7XG4gIGxldCBtaW5fcnNzaSA9IC05NjtcbiAgaWYgKE9TX0lPUylcbiAge1xuICAgIC8vIGludGVyZXN0ZWQgYWxsXG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZVxuXG4gIHtcbiAgICBpZiAocnNzaSA8PSBtaW5fcnNzaSlcbiAgICB7XG4gICAgICAvLyBub3QgaW50ZXJlc3RlZCByZWdpb25cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2VcblxuICAgIHtcbiAgICAgIC8vIGludGVyZXN0ZWQgcmVnaW9uXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbn1cblxuY29uc29sZS5sb2coXCJhZnRlciBsb2RlIGxpYjpcIiwgTWF0aC5mbG9vcihEYXRlLm5vdygpKSk7XG4vLyAtLS0gaW9zIC0tLS0tLS0tLS1cbnZhciBtYW5hZ2VyID0gbnVsbDtcbnZhciBpb3NEaWRSYW5nZUJlYWNvbnMgPSBudWxsO1xudmFyIGlvc0RpZENoYW5nZUF1dGhvcml6YXRpb24gPSBudWxsO1xuLy8gLS0tIGFuZHJvaWQgLS0tLS0tLS0tLVxudmFyIGFuZHJvaWRFbnRlcmVkID0gbnVsbDtcbnZhciBhbmRyb2lkRXhpdGVkID0gbnVsbDtcbnZhciBhbmRyb2lkQmVhY29uUHJveGltaXR5Q2FsbGJhY2sgPSBudWxsO1xuXG5mdW5jdGlvbiBiZWFjb25TdGFydFNjYW4oKSB7XG4gIHJlc2V0U3RhdGVCZWFjb24oKTtcbiAgaWYgKE9TX0lPUykge1xuICAgIC8vIC0tLS0tLS0tIElPUyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIGlvc0RpZENoYW5nZUF1dGhvcml6YXRpb24gPSAoZSkgPT4ge1xuICAgICAgVGkuQVBJLmluZm8oXCJkaWRDaGFuZ2VBdXRob3JpemF0aW9uXCIpO1xuICAgICAgc3dpdGNoIChlLnN0YXRlKSB7XG4gICAgICAgIGNhc2UgQkxFLkxPQ0FUSU9OX01BTkFHRVJfQVVUSE9SSVpBVElPTl9TVEFUVVNfQVVUSE9SSVpFRF9BTFdBWVM6XG4gICAgICAgICAgYWxlcnQoXCJNYW5hZ2VyIGF1dGhvcml6YXRpb24gaXMgYWx3YXlzXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEJMRS5MT0NBVElPTl9NQU5BR0VSX0FVVEhPUklaQVRJT05fU1RBVFVTX0FVVEhPUklaRURfV0hFTl9JTl9VU0U6XG4gICAgICAgICAgYWxlcnQoXCJNYW5hZ2VyIGF1dGhvcml6YXRpb24gaXMgd2hlbiBpbiB1c2VcIik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQkxFLkxPQ0FUSU9OX01BTkFHRVJfQVVUSE9SSVpBVElPTl9TVEFUVVNfREVOSUVEOlxuICAgICAgICAgIGFsZXJ0KFwiTWFuYWdlciBhdXRob3JpemF0aW9uIGlzIGRlbmllZFwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBCTEUuTE9DQVRJT05fTUFOQUdFUl9BVVRIT1JJWkFUSU9OX1NUQVRVU19OT1RfREVURVJNSU5FRDpcbiAgICAgICAgICBhbGVydChcIk1hbmFnZXIgYXV0aG9yaXphdGlvbiBpcyBub3QgZGV0ZXJtaW5lZFwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBCTEUuTE9DQVRJT05fTUFOQUdFUl9BVVRIT1JJWkFUSU9OX1NUQVRVU19SRVNUUklDVEVEOlxuICAgICAgICAgIGFsZXJ0KFwiTWFuYWdlciBhdXRob3JpemF0aW9uIGlzIHBvd2VyZWQgcmVzdHJpY3RlZFwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBhbGVydChcIlVua25vd25cIik7XG4gICAgICAgICAgYnJlYWs7fVxuXG4gICAgfTtcblxuICAgIGlvc0RpZFJhbmdlQmVhY29ucyA9IChlKSA9PiB7XG4gICAgICBUaS5BUEkuaW5mbyhcImRpZFJhbmdlQmVhY29uc1wiKTtcbiAgICAgIHZhciBiZWNhb25zID0gZS5iZWFjb25zO1xuXG4gICAgICBpZiAoYmVjYW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJObyBiZWFjb24gaW4gcmFuZ2VcIik7XG4gICAgICAgIGlmIChUaS5BcHAuUHJvcGVydGllcy5nZXRTdHJpbmcoXCJpbmV0QmVhY29uRGF0YV91dWlkXCIpICE9PSBudWxsKSB7XG4gICAgICAgICAgYWxlcnQoXG4gICAgICAgICAgXCJFeGl0IHV1aWQ6IFwiICtcbiAgICAgICAgICBUaS5BcHAuUHJvcGVydGllcy5nZXRTdHJpbmcoXCJpbmV0QmVhY29uRGF0YV91dWlkXCIpICtcbiAgICAgICAgICBcIiAgTWFqb3I6IFwiICtcbiAgICAgICAgICBUaS5BcHAuUHJvcGVydGllcy5nZXRTdHJpbmcoXCJpbmV0QmVhY29uRGF0YV9tYWpvclwiKSArXG4gICAgICAgICAgXCIgIE1pbm9yOiBcIiArXG4gICAgICAgICAgVGkuQXBwLlByb3BlcnRpZXMuZ2V0U3RyaW5nKFwiaW5ldEJlYWNvbkRhdGFfbWlub3JcIikpO1xuXG4gICAgICAgICAgcmVzZXRTdGF0ZUJlYWNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHByb3hpbWl0eSA9IGJlY2FvbnNbMF0ucHJveGltaXR5O1xuICAgICAgdmFyIGFjY3VyYWN5ID0gYmVjYW9uc1swXS5hY2N1cmFjeTtcbiAgICAgIHZhciBtYWpvciA9IGJlY2FvbnNbMF0ubWFqb3I7XG4gICAgICB2YXIgbWlub3IgPSBiZWNhb25zWzBdLm1pbm9yO1xuICAgICAgdmFyIGhhdmVDYXNlID0gdHJ1ZTtcblxuICAgICAgLy8gY2hlY2sgc3RhdGUgYmVmb3JlXG5cbiAgICAgIGlmICghaXNJbnRlcmVzdGVkUmVnaW9uKHByb3hpbWl0eSkpXG4gICAgICB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiVG9vIGZhci4uLlwiKTtcbiAgICAgIH1cbiAgICAgIGlmIChpc1NhbWVTdGF0ZUJlZm9yZShlLnJlZ2lvbi51dWlkLCBtYWpvciwgbWlub3IpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc3dpdGNoIChwcm94aW1pdHkpIHtcbiAgICAgICAgY2FzZSBCTEUuQkVBQ09OX1BST1hJTUlUWV9VTktOT1dOOlxuICAgICAgICAgIGFsZXJ0KFwiQmVhY29uIExvY2F0aW9uIDogVU5LTk9XTlwiKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIEJMRS5CRUFDT05fUFJPWElNSVRZX0lNTUVESUFURTpcbiAgICAgICAgICAvLyBzZXQgYmVhY29uIHN0YXRlIG9ubHksIGJ1dCBub3QgdXNlIHByb3hpbWl0eVxuICAgICAgICAgIHNldFN0YXRlQmVhY29uKGUucmVnaW9uLnV1aWQsIG1ham9yLCBtaW5vcik7XG4gICAgICAgICAgY29uc29sZS5sb2coZS5yZWdpb24udXVpZCArIFwiIE1ham9yOiBcIiArIG1ham9yICsgXCIgTWlub3I6IFwiICsgbWlub3IpO1xuICAgICAgICAgIGFsZXJ0KFxuICAgICAgICAgIFwiSU1NRURJQVRFIHV1aWQ6IFwiICtcbiAgICAgICAgICBlLnJlZ2lvbi51dWlkICtcbiAgICAgICAgICBcIiAgTWFqb3I6IFwiICtcbiAgICAgICAgICBtYWpvciArXG4gICAgICAgICAgXCIgIE1pbm9yOiBcIiArXG4gICAgICAgICAgbWlub3IgK1xuICAgICAgICAgIFwiICBBcHByb3g6IFwiICtcbiAgICAgICAgICBhY2N1cmFjeSArXG4gICAgICAgICAgXCJtKVwiKTtcblxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQkxFLkJFQUNPTl9QUk9YSU1JVFlfTkVBUjpcbiAgICAgICAgICBzZXRTdGF0ZUJlYWNvbihlLnJlZ2lvbi51dWlkLCBtYWpvciwgbWlub3IpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGUucmVnaW9uLnV1aWQgKyBcIiBNYWpvcjogXCIgKyBtYWpvciArIFwiIE1pbm9yOiBcIiArIG1pbm9yKTtcbiAgICAgICAgICBhbGVydChcbiAgICAgICAgICBcIk5FQVIgdXVpZDogXCIgK1xuICAgICAgICAgIGUucmVnaW9uLnV1aWQgK1xuICAgICAgICAgIFwiICBNYWpvcjogXCIgK1xuICAgICAgICAgIG1ham9yICtcbiAgICAgICAgICBcIiAgTWlub3I6IFwiICtcbiAgICAgICAgICBtaW5vciArXG4gICAgICAgICAgXCIgIEFwcHJveDogXCIgK1xuICAgICAgICAgIGFjY3VyYWN5ICtcbiAgICAgICAgICBcIm0pXCIpO1xuXG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBCTEUuQkVBQ09OX1BST1hJTUlUWV9GQVI6XG4gICAgICAgICAgc2V0U3RhdGVCZWFjb24oZS5yZWdpb24udXVpZCwgbWFqb3IsIG1pbm9yKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlLnJlZ2lvbi51dWlkICsgXCIgTWFqb3I6IFwiICsgbWFqb3IgKyBcIiBNaW5vcjogXCIgKyBtaW5vcik7XG4gICAgICAgICAgYWxlcnQoXG4gICAgICAgICAgXCJGQVIgdXVpZDogXCIgK1xuICAgICAgICAgIGUucmVnaW9uLnV1aWQgK1xuICAgICAgICAgIFwiICBNYWpvcjogXCIgK1xuICAgICAgICAgIG1ham9yICtcbiAgICAgICAgICBcIiAgTWlub3I6IFwiICtcbiAgICAgICAgICBtaW5vciArXG4gICAgICAgICAgXCIgIEFwcHJveDogXCIgK1xuICAgICAgICAgIGFjY3VyYWN5ICtcbiAgICAgICAgICBcIm0pXCIpO1xuXG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBoYXZlQ2FzZSA9IGZhbHNlO1xuICAgICAgICAgIGFsZXJ0KFwiQmVhY29uIExvY2F0aW9uIDogVU5LTk9XTlwiKTtcbiAgICAgICAgICBicmVhazt9XG5cblxuICAgICAgaWYgKGhhdmVDYXNlKSB7XG4gICAgICAgIHB1dEFwaShtYWpvciwgbWlub3IpO1xuICAgICAgfVxuXG4gICAgfTtcblxuICAgIGlmIChtYW5hZ2VyID09PSBudWxsKSB7XG4gICAgICBtYW5hZ2VyID0gQkxFLmNyZWF0ZVJlZ2lvbk1hbmFnZXIoKTtcbiAgICAgIG1hbmFnZXIuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwiZGlkQ2hhbmdlQXV0aG9yaXphdGlvblwiLFxuICAgICAgaW9zRGlkQ2hhbmdlQXV0aG9yaXphdGlvbik7XG5cbiAgICAgIG1hbmFnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImRpZFJhbmdlQmVhY29uc1wiLCBpb3NEaWRSYW5nZUJlYWNvbnMpO1xuXG4gICAgICB2YXIgYmVhY29uUmVnaW9uID0gQkxFLmNyZWF0ZUJlYWNvblJlZ2lvbih7XG4gICAgICAgIHV1aWQ6IGJlYWNvblVVSUQsXG4gICAgICAgIC8vIG1ham9yOiAzMjc3MixcbiAgICAgICAgLy8gbWlub3I6IDMsXG4gICAgICAgIGlkZW50aWZpZXI6IGJlYWNvbklkZW50aWZpZXIgfSk7XG5cbiAgICAgIG1hbmFnZXIuc3RhcnRSZWdpb25Nb25pdG9yaW5nKHtcbiAgICAgICAgYmVhY29uUmVnaW9uOiBiZWFjb25SZWdpb24gfSk7XG5cbiAgICAgIG1hbmFnZXIuc3RhcnRSYW5naW5nQmVhY29uc0luUmVnaW9uKHtcbiAgICAgICAgYmVhY29uUmVnaW9uOiBiZWFjb25SZWdpb24gfSk7XG5cbiAgICB9XG5cbiAgfSBlbHNlIHtcbiAgICAvLyAtLS0tLS0tLSBBbmRyb2lkIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gQ2hlY2sgUGVybWlzc2lvbiBMb2NhdGlvblxuICAgIHZhciBwZXJtaXNzaW9ucyA9IFtcImFuZHJvaWQucGVybWlzc2lvbi5BQ0NFU1NfRklORV9MT0NBVElPTlwiXTtcbiAgICBUaS5BbmRyb2lkLnJlcXVlc3RQZXJtaXNzaW9ucyhwZXJtaXNzaW9ucywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmIChlLnN1Y2Nlc3MpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJhbGxvdyBsb2NhdGlvbiBzdWNjZXNzXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJub3QgYWxsb3cgbG9jYXRpb25cIik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZyhcImFmdGVyIGNoZWNrIHBlcm06XCIsIE1hdGguZmxvb3IoRGF0ZS5ub3coKSkpO1xuXG4gICAgLy9hbmRyb2lkRW50ZXJlZCBjYWxsYmFja1xuICAgIHZhciBpc0VudGVyUmVnaW9uID0gZmFsc2U7XG4gICAgYW5kcm9pZEVudGVyZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgbGV0IHRhZyA9IFwiYW5kcm9pZEVudGVyZWQ6XCI7XG4gICAgICBjb25zb2xlLmxvZyh0YWcsIFwiZW50ZXJlZCByZWdpb24gaWRlbnRpZmVyOiBcIiArIGUuaWRlbnRpZmllcik7XG4gICAgICBjb25zb2xlLmxvZyh0YWcsIGUpO1xuICAgICAgaXNFbnRlclJlZ2lvbiA9IHRydWU7XG4gICAgICBhbGVydChcbiAgICAgIHRhZyArIFwiRW50ZXJcIik7XG5cbiAgICB9O1xuXG4gICAgLy9hbmRyb2lkQmVhY29uUHJveGltaXR5Q2FsbGJhY2tcbiAgICBhbmRyb2lkQmVhY29uUHJveGltaXR5Q2FsbGJhY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgbGV0IHRhZyA9IFwicHJveENhbGxiYWNrOlwiO1xuICAgICAgaWYgKGlzRW50ZXJSZWdpb24pIHtcbiAgICAgICAgY29uc29sZS5sb2codGFnLCBcImlkZW50aWZlcjogXCIgKyBlLmlkZW50aWZpZXIpO1xuICAgICAgICBjb25zb2xlLmxvZyh0YWcsIFwidXVpZDogXCIgKyBlLnV1aWQpO1xuICAgICAgICBjb25zb2xlLmxvZyh0YWcsIFwibWFqb3I6IFwiICsgZS5tYWpvcik7XG4gICAgICAgIGNvbnNvbGUubG9nKHRhZywgXCJtaW5vcjogXCIgKyBlLm1pbm9yKTtcbiAgICAgICAgY29uc29sZS5sb2codGFnLCBcInByb3hpbWl0eTogXCIgKyBlLnByb3hpbWl0eSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRhZywgXCJhY2N1cmFjeTogXCIgKyBlLmFjY3VyYWN5KTtcbiAgICAgICAgY29uc29sZS5sb2codGFnLCBcInJzc2k6IFwiICsgZS5yc3NpKTtcbiAgICAgICAgY29uc29sZS5sb2codGFnLCBcInBvd2VyOiBcIiArIGUucG93ZXIpO1xuICAgICAgICBhbGVydCh0YWcgKyBcIm1pbm9yOlwiICsgZS5taW5vciArIFwiLCBwcm94OlwiICsgZS5wcm94aW1pdHkgKyBcIiwgcnNzaTpcIiArIGUucnNzaSArIFwiLCBhY2N1cmFjeTpcIiArIGUuYWNjdXJhY3kpO1xuXG5cbiAgICAgICAgLy8gaWYgbm90IGludGVyZXN0ZWQgcmVnaW9uLCBpZ25vcmUgaXQgISFcbiAgICAgICAgaWYgKCFpc0ludGVyZXN0ZWRSZWdpb24oZS5yc3NpKSlcbiAgICAgICAge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiVG9vIGZhci4uLlwiKTtcbiAgICAgICAgICBhbGVydChcIlRvbyBmYXIuLi5yc3NpOlwiICsgZS5yc3NpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2hlY2sgaXMgc2FtZSBzdGF0ZSBiZWZvclxuICAgICAgICBpZiAoaXNTYW1lU3RhdGVCZWZvcmUoZS51dWlkLCBlLm1ham9yLCBlLm1pbm9yKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHRhZywgXCJTYW1lIGJlYWNvblwiKTtcbiAgICAgICAgICBpc0NvbmZpcm1FeGl0ID0gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGp1c3QgcmVjb3JkIGJlYWNvbiwgbm90IHVzZSBwcm94aW1pdHlcbiAgICAgICAgc2V0U3RhdGVCZWFjb24oZS51dWlkLCBlLm1ham9yLCBlLm1pbm9yKTtcbiAgICAgICAgYWxlcnQoXG4gICAgICAgIHRhZyArIFwicHV0QXBpLT5cIiArIGUudXVpZCArIFwiIE1ham9yOiBcIiArIGUubWFqb3IgKyBcIiBNaW5vcjogXCIgKyBlLm1pbm9yICsgXCIgcHJveDpcIiArIGUucHJveGltaXR5KTtcblxuICAgICAgICAvL3B1dCBtZXNzYWdlIHRvIGJvdFxuICAgICAgICBwdXRBcGkoZS5tYWpvciwgZS5taW5vcik7XG4gICAgICAgIHZhciBteV90ZXh0ID0gXCIgXCIgKyBlLm1ham9yICsgXCIsIFwiICsgZS5taW5vcjtcbiAgICAgICAgbXlfdGV4dCA9IFRpLkFwcC5Qcm9wZXJ0aWVzLmdldFN0cmluZyhcImZfYmVhY29uXCIpICsgbXlfdGV4dDtcbiAgICAgICAgVGkuQXBwLlByb3BlcnRpZXMuc2V0U3RyaW5nKFwiZl9iZWFjb25cIiwgbXlfdGV4dCk7XG4gICAgICAgIGlzRW50ZXJSZWdpb24gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy9hbmRyb2lkRXhpdGVkIGNhbGxiYWNrXG4gICAgdmFyIGhhbmRsZSA9IG51bGw7XG4gICAgdmFyIGlzQ29uZmlybUV4aXQgPSBmYWxzZTtcbiAgICBhbmRyb2lkRXhpdGVkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlzQ29uZmlybUV4aXQgPSB0cnVlO1xuICAgICAgY29uc29sZS5sb2coXCJleGl0ZWQgcmVnaW9uIGlkZW50aWZlcjogXCIgKyBlLmlkZW50aWZpZXIpO1xuXG4gICAgICBpZiAoVGkuQXBwLlByb3BlcnRpZXMuZ2V0U3RyaW5nKFwiaW5ldEJlYWNvbkRhdGFfdXVpZFwiKSAhPT0gbnVsbCAmJiBoYW5kbGUgPT0gbnVsbCkge1xuICAgICAgICB2YXIgY291bnRFeGl0ID0gMDtcbiAgICAgICAgaGFuZGxlID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiaXNDb25maXJtRXhpdDogXCIgKyBpc0NvbmZpcm1FeGl0KTtcbiAgICAgICAgICBpZiAoY291bnRFeGl0ID4gNjAgJiYgaXNDb25maXJtRXhpdCkge1xuICAgICAgICAgICAgLy8gQ29uZmlybSBleGl0ZWQgc2lnbmFsXG4gICAgICAgICAgICBhbGVydChcbiAgICAgICAgICAgIFwiRXhpdCB1dWlkOiBcIiArXG4gICAgICAgICAgICBUaS5BcHAuUHJvcGVydGllcy5nZXRTdHJpbmcoXCJpbmV0QmVhY29uRGF0YV91dWlkXCIpICtcbiAgICAgICAgICAgIFwiICBNYWpvcjogXCIgK1xuICAgICAgICAgICAgVGkuQXBwLlByb3BlcnRpZXMuZ2V0U3RyaW5nKFwiaW5ldEJlYWNvbkRhdGFfbWFqb3JcIikgK1xuICAgICAgICAgICAgXCIgIE1pbm9yOiBcIiArXG4gICAgICAgICAgICBUaS5BcHAuUHJvcGVydGllcy5nZXRTdHJpbmcoXCJpbmV0QmVhY29uRGF0YV9taW5vclwiKSk7XG5cbiAgICAgICAgICAgIHJlc2V0U3RhdGVCZWFjb24oKTtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaGFuZGxlKTtcbiAgICAgICAgICAgIGhhbmRsZSA9IG51bGw7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIml0J3MgcmVhbGx5IGV4aXQgXCIgKyBoYW5kbGUpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIWlzQ29uZmlybUV4aXQpIHtcbiAgICAgICAgICAgIC8vIFJlc2V0IENvbmZpcm0gRXhpdCBJbnRlcnZhbFxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChoYW5kbGUpO1xuICAgICAgICAgICAgaGFuZGxlID0gbnVsbDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaXQncyBub3QgZXhpdCBcIiArIGhhbmRsZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvdW50RXhpdCsrO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiY291bnQ6IFwiICsgY291bnRFeGl0KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0sIDEwMDApO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBhbmRyb2lkQmluZGluZ0NhbGxiYWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRhZyA9IFwiYW5kcm9pZEJpbmRpbmdDYWxsYmFjazogXCI7XG4gICAgICBjb25zb2xlLmxvZyh0YWcsIGUpO1xuICAgIH07XG5cbiAgICB2YXIgaW5CZWNvblJhbmdlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciB0YWcgPSBcImJlYWNvblJhbmdlczogXCI7XG4gICAgICBjb25zb2xlLmxvZyh0YWcsIFwiSSBhbSBpbiB0aGUgXCIgKyBlLmlkZW50aWZpZXIgKyBcIiByZWdpb25cIik7XG4gICAgICBjb25zb2xlLmxvZyh0YWcsIFwiSSBzZWUgXCIgKyBlLmJlYWNvbnMubGVuZ3RoICsgXCIgYmVhY29ucyBpbiB0aGlzIHJlZ2lvbjpcIik7XG4gICAgICBjb25zb2xlLmxvZyh0YWcsIFwiLS0tLS0tLS0tLS0tLS0tLVwiKTtcbiAgICAgIGUuYmVhY29ucy5mb3JFYWNoKGZ1bmN0aW9uIChiZWFjb24sIGluZGV4KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHRhZywgXCJCZWFjb24gbnVtYmVyOiBcIiArIGluZGV4KTtcbiAgICAgICAgY29uc29sZS5sb2codGFnLCBcInV1aWQ6IFwiICsgYmVhY29uLnV1aWQpO1xuICAgICAgICBjb25zb2xlLmxvZyh0YWcsIFwibWFqb3I6IFwiICsgYmVhY29uLm1ham9yKTtcbiAgICAgICAgY29uc29sZS5sb2codGFnLCBcIm1pbm9yOiBcIiArIGJlYWNvbi5taW5vcik7XG4gICAgICAgIGNvbnNvbGUubG9nKHRhZywgXCJwcm94aW1pdHk6IFwiICsgYmVhY29uLnByb3hpbWl0eSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRhZywgXCJhY2N1cmFjeTogXCIgKyBiZWFjb24uYWNjdXJhY3kpO1xuICAgICAgICBjb25zb2xlLmxvZyh0YWcsIFwicnNzaTogXCIgKyBiZWFjb24ucnNzaSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRhZywgXCJwb3dlcjogXCIgKyBiZWFjb24ucG93ZXIpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIi0tLS0tLS0tLS0tLS0tLS1cIik7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIHJlZ2lvblN0YXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciB0YWcgPSBcInJlZ2lvblN0YXRlOiBcIjtcbiAgICAgIGNvbnNvbGUubG9nKHRhZywgXCJpZGVudGlmZXI6IFwiICsgZS5yZWdpb25TdGF0ZSk7XG4gICAgfTtcblxuICAgIEJMRS5hZGRFdmVudExpc3RlbmVyKFwiZW50ZXJlZFJlZ2lvblwiLCBhbmRyb2lkRW50ZXJlZCk7XG4gICAgQkxFLmFkZEV2ZW50TGlzdGVuZXIoXCJleGl0ZWRSZWdpb25cIiwgYW5kcm9pZEV4aXRlZCk7XG4gICAgQkxFLmFkZEV2ZW50TGlzdGVuZXIoXCJiZWFjb25Qcm94aW1pdHlcIiwgYW5kcm9pZEJlYWNvblByb3hpbWl0eUNhbGxiYWNrKTtcbiAgICBCTEUuYWRkRXZlbnRMaXN0ZW5lcihcIm9uSUJlYWNvblNlcnZpY2VDb25uZWN0XCIsIGFuZHJvaWRCaW5kaW5nQ2FsbGJhY2spO1xuICAgIEJMRS5hZGRFdmVudExpc3RlbmVyKFwiYmVhY29uUmFuZ2VzXCIsIGluQmVjb25SYW5nZSk7XG4gICAgQkxFLmFkZEV2ZW50TGlzdGVuZXIoXCJkZXRlcm1pbmVkUmVnaW9uU3RhdGVcIiwgcmVnaW9uU3RhdGUpO1xuXG4gICAgY29uc29sZS5sb2coXCJhZGQgZXZudCBjb21wbGV0ZTpcIiwgTWF0aC5mbG9vcihEYXRlLm5vdygpKSk7XG5cbiAgICAvLyBBaXJwb3J0cyBCZWFjb25cbiAgICAvLyBVVUlEOiA1OTkxZTE2MS1iYjQ2LTQzMmYtOWJkOC1iMjcxZjc2ZjY3ZDlcblxuICAgIC8vIE15SG9tZVxuICAgIC8vIGM4YTk0ZjQyLTNjZDUtNDgzYS04YWRjLTk3NDczMTk3YjhiNFxuXG4gICAgdmFyIHdoZW5fcmVhZHk7XG4gICAgdmFyIG5vdF9yZWFkeV9jb3VudCA9IDA7XG5cbiAgICBCTEUuYmluZEJlYWNvblNlcnZpY2UoKTtcblxuICAgIHdoZW5fcmVhZHkgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIUJMRS5pc1JlYWR5KCkpXG4gICAgICB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibm90X3JlYWR5X2NvdW50PVwiLCBub3RfcmVhZHlfY291bnQpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkJMRSBOb3QgcmVhZHlcIik7XG4gICAgICAgIG5vdF9yZWFkeV9jb3VudCsrO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIFRpLkFQSS5pbmZvKFwiVHJ5XCIsIG5vdF9yZWFkeV9jb3VudCwgXCJ0aW1lLCBcIiwgXCJPa2F5ISBNb2R1bGUgaXMgcmVhZHkhXCIpO1xuXG4gICAgICAvLyBjb25zb2xlLmxvZyhcImNoZWNrQXZhaWxhYmlsaXR5PVwiLCBCTEUuY2hlY2tBdmFpbGFiaWxpdHkoKSk7XG4gICAgICBpZiAoIUJMRS5jaGVja0F2YWlsYWJpbGl0eSgpKVxuICAgICAge1xuICAgICAgICBhbGVydChcIkl0J3Mgbm90IHN1cHBvcnQgaW4geW91ciBkZXZpY2UhXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIEJMRS5zZXRCYWNrZ3JvdW5kTW9kZShmYWxzZSk7XG4gICAgICBCTEUuc2V0U2NhblBlcmlvZHMoe1xuICAgICAgICBmb3JlZ3JvdW5kU2NhblBlcmlvZDogNTAwMCxcbiAgICAgICAgZm9yZWdyb3VuZEJldHdlZW5TY2FuUGVyaW9kOiAyMDAsXG4gICAgICAgIGJhY2tncm91bmRTY2FuUGVyaW9kOiA1MDAwLFxuICAgICAgICBiYWNrZ3JvdW5kQmV0d2VlblNjYW5QZXJpb2Q6IDIwMCB9KTtcblxuXG4gICAgICBCTEUuc3RhcnRNb25pdG9yaW5nRm9yUmVnaW9uKHtcbiAgICAgICAgaWRlbnRpZmllcjogYmVhY29uSWRlbnRpZmllcixcbiAgICAgICAgdXVpZDogYmVhY29uVVVJRCB9KTtcblxuXG4gICAgICBjbGVhckludGVydmFsKHdoZW5fcmVhZHkpO1xuICAgICAgd2hlbl9yZWFkeSA9IG51bGw7XG4gICAgfSwgMTAwMCk7XG5cbiAgICB2YXIgbW9uaXQ7XG5cbiAgICBtb25pdCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIHZhciBpc0ZvcmVncm91bmQgPSBhbmRyb2lkUGxhdGZvcm1Ub29scy5pc0luRm9yZWdyb3VuZCgpO1xuICAgICAgaWYgKCFpc0ZvcmVncm91bmQpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJBcHAgaW4gYmFja2dyb3VuZC4gU3RvcCBzY2FuLlwiKTtcbiAgICAgICAgQkxFLnN0b3BTY2FuKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGVuZCBhbmRyb2lkXG4gIH1cbn1cblxuZnVuY3Rpb24gYmVhY29uU3RvcFNjYW4oKSB7XG4gIHJlc2V0U3RhdGVCZWFjb24oKTtcbiAgaWYgKE9TX0lPUykge1xuICAgIG1hbmFnZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICBcImRpZENoYW5nZUF1dGhvcml6YXRpb25cIixcbiAgICBpb3NEaWRDaGFuZ2VBdXRob3JpemF0aW9uKTtcblxuICAgIG1hbmFnZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRpZFJhbmdlQmVhY29uc1wiLCBpb3NEaWRSYW5nZUJlYWNvbnMpO1xuICB9IGVsc2Uge1xuICAgIEJMRS5zdG9wTW9uaXRvcmluZ0FsbFJlZ2lvbnMoKTtcbiAgICBCTEUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImVudGVyZWRSZWdpb25cIiwgYW5kcm9pZEVudGVyZWQpO1xuICAgIEJMRS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXhpdGVkUmVnaW9uXCIsIGFuZHJvaWRFeGl0ZWQpO1xuICAgIEJMRS5yZW1vdmVFdmVudExpc3RlbmVyKFwiYmVhY29uUHJveGltaXR5XCIsIGFuZHJvaWRCZWFjb25Qcm94aW1pdHlDYWxsYmFjayk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHV0QXBpKG1ham9yLCBtaW5vcikge1xuICB2YXIgeGhyID0gVGkuTmV0d29yay5jcmVhdGVIVFRQQ2xpZW50KCk7XG4gIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkge1xuICAgIGNvbnNvbGUubG9nKHRoaXMuc3RhdHVzKTtcbiAgICBjb25zb2xlLmxvZyh0aGlzLnJlc3BvbnNlVGV4dCk7XG4gIH07XG4gIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICBjb25zb2xlLmxvZyh0aGlzLnN0YXR1cyk7XG4gICAgY29uc29sZS5sb2codGhpcy5yZXNwb25zZVRleHQpO1xuICB9O1xuICB4aHIudGltZW91dCA9IDEwMDAwO1xuICAvLyB4aHIub3BlbignUFVUJywnaHR0cHM6Ly9tb3Jwcm9tLWJlYWNvbi5uZXhwaWUuaW8nKTtcbiAgeGhyLm9wZW4oJ1BVVCcsICdodHRwczovL2JlYWNvbi10cmFjay5pbmV0LmNvLnRoJyk7XG4gIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLUFQSS1LRVknLCAnUnZCbWxsOW9wRW5WWjNhQkg2d3lnTjdWWEtyN0RJWXcnKTtcbiAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJjb250ZW50LXR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICB2YXIgcGFyYW1zID0ge1xuICAgIHVpZDogVGkuQXBwLlByb3BlcnRpZXMuZ2V0U3RyaW5nKFwiaW5ldEJlYWNvbkRhdGFfY2lkXCIpLFxuICAgIG1ham9yOiBtYWpvcixcbiAgICBtaW5vcjogbWlub3IgfTtcblxuICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeShwYXJhbXMpKTtcbn1cblxuZnVuY3Rpb24gQkxFU2NhbigpIHtcbiAgaWYgKE9TX0lPUylcbiAge1xuICAgIGNvbnNvbGUubG9nKFwiSU9TXCIpO1xuICB9IGVsc2VcblxuICB7XG4gICAgY29uc29sZS5sb2coXCJBbmRyb2lkXCIpO1xuICAgIGlmIChjZW50cmFsTWFuYWdlci5pc1NjYW5uaW5nKCkpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiQWxyZWFkeSBzY2FubmluZywgcGxlYXNlIHN0b3Agc2NhbiBmaXJzdCFcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGdhdHRfaGFuZGxlO1xuICAgIGdhdHRfaGFuZGxlID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmIChjZW50cmFsTWFuYWdlci5kaWRVcGRhdGVTdGF0ZSAhPSBCTEUuTUFOQUdFUl9TVEFURV9QT1dFUkVEX09OKVxuICAgICAge1xuICAgICAgICBjb25zb2xlLmxvZyhcImRpZFN0YXRlPVwiLCBjZW50cmFsTWFuYWdlci5kaWRVcGRhdGVTdGF0ZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChjZW50cmFsTWFuYWdlci5nZXRTdGF0ZSgpICE9IEJMRS5NQU5BR0VSX1NUQVRFX1BPV0VSRURfT04pXG4gICAgICB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQkxFIG1hbmFnZXIgbmVlZHMgdG8gYmUgcG93ZXJlZCBvbiBiZWZvcmUuIENhbGwgaW5pdGlhbGl6ZSgpLlwiKTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coXCJCTEUuTUFOQUdFUl9TVEFURV9QT1dFUkVEX09OXCIpO1xuICAgICAgLy8gU3RhcnQgU2NhblxuICAgICAgY2VudHJhbE1hbmFnZXIuc3RhcnRTY2FuKCk7XG4gICAgICBjb25zb2xlLmxvZyhcIlN0YXJ0IEJMRVwiKTtcbiAgICAgIGNsZWFySW50ZXJ2YWwoZ2F0dF9oYW5kbGUpO1xuICAgICAgZ2F0dF9oYW5kbGUgPSBudWxsO1xuICAgIH0sIDEwMDApO1xuICB9XG59XG5cbnZhciBnYXR0RGlkRGlzY292ZXIgPSBmdW5jdGlvbiAoZSkge1xuICBUaS5BUEkuaW5mbygnZGlkRGlzY292ZXJQZXJpcGhlcmFsJyk7XG4gIFRpLkFQSS5pbmZvKGUucGVyaXBoZXJhbC51dWlkcy51dWlkLCBcIkFkZHJlc3M6XCIsIGUucGVyaXBoZXJhbC5hZGRyZXNzLCBlLnBlcmlwaGVyYWwubmFtZSk7XG4gIC8vIFRpLkFQSS5pbmZvKGUucGVyaXBoZXJhbC5zZXJ2aWNlcyk7XG4gIC8vIF8uZWFjaChlLnBlcmlwaGVyYWwudXVpZHMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgLy8gICBjb25zb2xlLmxvZyhlLnBlcmlwaGVyYWwubmFtZSwgXCI6XCIsIGUucGVyaXBoZXJhbC5hZGRyZXNzLCBcInV1aWQ6XCIsIGUucGVyaXBoZXJhbC51dWlkcy51dWlkKTtcbiAgLy8gfSk7XG4gIC8vIFRpLkFQSS5pbmZvKGRpc2NvdmVyU2VydmljZXMoKSk7XG59O1xuXG5jZW50cmFsTWFuYWdlci5hZGRFdmVudExpc3RlbmVyKFwiZGlkRGlzY292ZXJQZXJpcGhlcmFsXCIsIGdhdHREaWREaXNjb3Zlcik7XG5cbmZ1bmN0aW9uIHN0b3BCTEUoKSB7XG4gIGlmIChjZW50cmFsTWFuYWdlci5pc1NjYW5uaW5nKSB7XG4gICAgY29uc29sZS5sb2coXCJTdG9wIEJMRVwiKTtcbiAgICBjZW50cmFsTWFuYWdlci5zdG9wU2NhbigpO1xuICB9IGVsc2VcbiAge1xuICAgIGNvbnNvbGUubG9nKFwiTm8gc2NhbiBzZXNzaW9uIVwiKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBtZDVfaGFzaCgpIHtcbiAgdmFyIHRhZyA9IFwibWQ1X2hhc2hcIjtcbiAgdmFyIG15X2NpZCA9IFRpLkFwcC5Qcm9wZXJ0aWVzLmdldFN0cmluZyhcImluZXRCZWFjb25EYXRhX2NpZFwiKTtcbiAgY29uc29sZS5sb2codGFnLCBcImNpZDpcIiwgbXlfY2lkKTtcbiAgdmFyIG15X21kNSA9IFRpLlV0aWxzLm1kNUhleERpZ2VzdChgYjFjZjRiN2VjMjAzOiR7bXlfY2lkfTozMjc4MDoxMTAyYCk7XG4gIGFsZXJ0KG15X21kNSk7XG59XG5cbmV4cG9ydHMuYmVhY29uU3RhcnRTY2FuID0gYmVhY29uU3RhcnRTY2FuO1xuZXhwb3J0cy5iZWFjb25TdG9wU2NhbiA9IGJlYWNvblN0b3BTY2FuO1xuZXhwb3J0cy5wdXRBcGkgPSBwdXRBcGk7XG5leHBvcnRzLkJMRVNjYW4gPSBCTEVTY2FuO1xuZXhwb3J0cy5zdG9wQkxFID0gc3RvcEJMRTtcbmV4cG9ydHMubWQ1X2hhc2ggPSBtZDVfaGFzaDsiXSwic291cmNlUm9vdCI6ImQ6XFxHSUFOVFxcd3cyXFxiYy1kZWJ1Z1xcaW5ldHRpYmVhY29uIn0=
