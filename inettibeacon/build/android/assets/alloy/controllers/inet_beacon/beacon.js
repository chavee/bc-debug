var Alloy=require("/alloy"),
Backbone=Alloy.Backbone,
_=Alloy._;




function __processArg(obj,key){
var arg=null;



return obj&&(arg=obj[key]||null),arg;
}

function Controller(){
































function resetStateBeacon(){
Ti.App.Properties.setString("inetBeaconData_major",null),
Ti.App.Properties.setString("inetBeaconData_minor",null),
Ti.App.Properties.setString("inetBeaconData_uuid",null);
}
function setStateBeacon(uuid,minor,major){
Ti.App.Properties.setString("inetBeaconData_major",major),
Ti.App.Properties.setString("inetBeaconData_minor",minor),
Ti.App.Properties.setString("inetBeaconData_uuid",uuid);
}
function isSameStateBefore(uuid,minor,major){return(

uuid==Ti.App.Properties.getString("inetBeaconData_uuid")&&
major==Ti.App.Properties.getString("inetBeaconData_major")&&
minor==Ti.App.Properties.getString("inetBeaconData_minor"));




}
















function beaconStartScan(){

if(resetStateBeacon(),!0)

















































































































































{


var permissions=["android.permission.ACCESS_FINE_LOCATION"];
Ti.Android.requestPermissions(permissions,function(e){
e.success?
console.log("allow location success"):

console.log("not allow location");

});


var isEnterRegion=!1;
androidEntered=function(e){
let tag="androidEntered:";
console.log("androidEntered:","entered region identifer: "+e.identifier),
console.log("androidEntered:",e),
isEnterRegion=!0,
alert("androidEntered:Enter");


},


androidBeaconProximityCallback=function(e){
let tag="proxCallback:";
if(isEnterRegion){

if(isSameStateBefore(e.uuid,e.major,e.minor))


return console.log(tag,"Same beacon"),void(isConfirmExit=!1);


setStateBeacon(e.uuid,e.major,e.minor),
alert(
"proxCallback: "+e.uuid+" Major: "+e.major+" Minor: "+e.minor),


putApi(e.major,e.minor),
isEnterRegion=!1;
}
console.log("proxCallback:","identifer: "+e.identifier),
console.log("proxCallback:","uuid: "+e.uuid),
console.log("proxCallback:","major: "+e.major),
console.log("proxCallback:","minor: "+e.minor),
console.log("proxCallback:","proximity: "+e.proximity),
console.log("proxCallback:","accuracy: "+e.accuracy),
console.log("proxCallback:","rssi: "+e.rssi),
console.log("proxCallback:","power: "+e.power);
};var


handle=null,
isConfirmExit=!1;
androidExited=function(e){



if(isConfirmExit=!0,console.log("exited region identifer: "+e.identifier),null!==Ti.App.Properties.getString("inetBeaconData_uuid")&&null==handle){
var countExit=0;
handle=setInterval(function(){























return console.log("isConfirmExit: "+isConfirmExit),60<countExit&&isConfirmExit?(alert("Exit uuid: "+Ti.App.Properties.getString("inetBeaconData_uuid")+"  Major: "+Ti.App.Properties.getString("inetBeaconData_major")+"  Minor: "+Ti.App.Properties.getString("inetBeaconData_minor")),resetStateBeacon(),clearInterval(handle),handle=null,console.log("it's really exit "+handle)):!isConfirmExit&&(clearInterval(handle),handle=null,console.log("it's not exit "+handle)),countExit++,void console.log("count: "+countExit);
},1e3);
}
},

BLE.addEventListener("enteredRegion",androidEntered),
BLE.addEventListener("exitedRegion",androidExited),
BLE.addEventListener("beaconProximity",androidBeaconProximityCallback),






BLE.startMonitoringForRegion({
identifier:beaconIdentifier,
uuid:beaconUUID}),

BLE.setBackgroundMode(!1),

BLE.setScanPeriods({
foregroundScanPeriod:5e3,
foregroundBetweenScanPeriod:200,
backgroundScanPeriod:5e3,
backgroundBetweenScanPeriod:200});


}else if(iosDidChangeAuthorization=e=>{switch(Ti.API.info("didChangeAuthorization"),e.state){case BLE.LOCATION_MANAGER_AUTHORIZATION_STATUS_AUTHORIZED_ALWAYS:alert("Manager authorization is always");break;case BLE.LOCATION_MANAGER_AUTHORIZATION_STATUS_AUTHORIZED_WHEN_IN_USE:alert("Manager authorization is when in use");break;case BLE.LOCATION_MANAGER_AUTHORIZATION_STATUS_DENIED:alert("Manager authorization is denied");break;case BLE.LOCATION_MANAGER_AUTHORIZATION_STATUS_NOT_DETERMINED:alert("Manager authorization is not determined");break;case BLE.LOCATION_MANAGER_AUTHORIZATION_STATUS_RESTRICTED:alert("Manager authorization is powered restricted");break;default:alert("Unknown");}},iosDidRangeBeacons=e=>{Ti.API.info("didRangeBeacons");var becaons=e.beacons;if(0===becaons.length)return console.log("No beacon in range"),void(null!==Ti.App.Properties.getString("inetBeaconData_uuid")&&(alert("Exit uuid: "+Ti.App.Properties.getString("inetBeaconData_uuid")+"  Major: "+Ti.App.Properties.getString("inetBeaconData_major")+"  Minor: "+Ti.App.Properties.getString("inetBeaconData_minor")),resetStateBeacon()));var proximity=becaons[0].proximity,accuracy=becaons[0].accuracy,major=becaons[0].major,minor=becaons[0].minor,haveCase=!0;isSameStateBefore(e.region.uuid,major,minor)||(proximity===BLE.BEACON_PROXIMITY_UNKNOWN?alert("Beacon Location : UNKNOWN"):proximity===BLE.BEACON_PROXIMITY_IMMEDIATE?(setStateBeacon(e.region.uuid,major,minor),console.log(e.region.uuid+" Major: "+major+" Minor: "+minor),alert("IMMEDIATE uuid: "+e.region.uuid+"  Major: "+major+"  Minor: "+minor+"  Approx: "+accuracy+"m)")):proximity===BLE.BEACON_PROXIMITY_NEAR?(setStateBeacon(e.region.uuid,major,minor),console.log(e.region.uuid+" Major: "+major+" Minor: "+minor),alert("NEAR uuid: "+e.region.uuid+"  Major: "+major+"  Minor: "+minor+"  Approx: "+accuracy+"m)")):proximity===BLE.BEACON_PROXIMITY_FAR?(setStateBeacon(e.region.uuid,major,minor),console.log(e.region.uuid+" Major: "+major+" Minor: "+minor),alert("FAR uuid: "+e.region.uuid+"  Major: "+major+"  Minor: "+minor+"  Approx: "+accuracy+"m)")):(haveCase=!1,alert("Beacon Location : UNKNOWN")),haveCase&&putApi(major,minor))},null===manager){manager=BLE.createRegionManager(),manager.addEventListener("didChangeAuthorization",iosDidChangeAuthorization),manager.addEventListener("didRangeBeacons",iosDidRangeBeacons);var beaconRegion=BLE.createBeaconRegion({uuid:beaconUUID,identifier:beaconIdentifier});manager.startRegionMonitoring({beaconRegion:beaconRegion}),manager.startRangingBeaconsInRegion({beaconRegion:beaconRegion})}
}

function beaconStopScan(){
resetStateBeacon(),1?(







BLE.stopMonitoringAllRegions(),
BLE.removeEventListener("enteredRegion",androidEntered),
BLE.removeEventListener("exitedRegion",androidExited),
BLE.removeEventListener("beaconProximity",androidBeaconProximityCallback)):(manager.removeEventListener("didChangeAuthorization",iosDidChangeAuthorization),manager.removeEventListener("didRangeBeacons",iosDidRangeBeacons));

}

function putApi(major,minor){
var xhr=Ti.Network.createHTTPClient();
xhr.onload=function(e){
console.log(this.status),
console.log(this.responseText);
},
xhr.onerror=function(e){
console.log(this.status),
console.log(this.responseText);
},
xhr.timeout=1e4,

xhr.open("PUT","https://beacon-track.inet.co.th"),
xhr.setRequestHeader("X-API-KEY","RvBmll9opEnVZ3aBH6wygN7VXKr7DIYw"),
xhr.setRequestHeader("content-type","application/json");
var params={
uid:Ti.App.Properties.getString("inetBeaconData_cid"),
major:major,
minor:minor};

xhr.send(JSON.stringify(params));
}if(require("/alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="inet_beacon/beacon",this.args=arguments[0]||{},arguments[0])var __parentSymbol=__processArg(arguments[0],"__parentSymbol"),$model=__processArg(arguments[0],"$model"),__itemTemplate=__processArg(arguments[0],"__itemTemplate");var $=this,exports={},__defers={};exports.destroy=function(){},_.extend($,$.__views);let beaconUUID="5991e161-bb46-432f-9bd8-b271f76f67d9",beaconIdentifier="MyHome";var BLE=null;BLE=1?require("com.liferay.beacons"):require("appcelerator.ble");var manager=null,iosDidRangeBeacons=null,iosDidChangeAuthorization=null,androidEntered=null,androidExited=null,androidBeaconProximityCallback=null;

exports.beaconStartScan=beaconStartScan,
exports.beaconStopScan=beaconStopScan,
exports.putApi=putApi,









_.extend($,exports);
}

module.exports=Controller;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlbXBsYXRlLmpzIiwiYmVhY29uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLEdBQUEsQ0FBQSxLQUFBLENBQUEsT0FBQSxDQUFBLFFBQUEsQ0FBQTtBQUNBLFFBQUEsQ0FBQSxLQUFBLENBQUEsUUFEQTtBQUVBLENBQUEsQ0FBQSxLQUFBLENBQUEsQ0FGQTs7Ozs7QUFPQSxRQUFBLENBQUEsWUFBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUE7QUFDQSxHQUFBLENBQUEsR0FBQSxDQUFBLElBQUE7Ozs7QUFJQSxNQUhBLENBQUEsR0FHQSxHQUZBLEdBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLEVBQUEsSUFFQSxFQUFBLEdBQUE7QUFDQTs7QUFFQSxRQUFBLENBQUEsVUFBQSxFQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNYQSxRQUFBLENBQUEsZ0JBQUEsRUFBQTtBQUNBLEVBQUEsQ0FBQSxHQUFBLENBQUEsVUFBQSxDQUFBLFNBQUEsQ0FBQSxzQkFBQSxDQUFBLElBQUEsQ0FEQTtBQUVBLEVBQUEsQ0FBQSxHQUFBLENBQUEsVUFBQSxDQUFBLFNBQUEsQ0FBQSxzQkFBQSxDQUFBLElBQUEsQ0FGQTtBQUdBLEVBQUEsQ0FBQSxHQUFBLENBQUEsVUFBQSxDQUFBLFNBQUEsQ0FBQSxxQkFBQSxDQUFBLElBQUEsQ0FIQTtBQUlBO0FBQ0EsUUFBQSxDQUFBLGNBQUEsQ0FBQSxJQUFBLENBQUEsS0FBQSxDQUFBLEtBQUEsQ0FBQTtBQUNBLEVBQUEsQ0FBQSxHQUFBLENBQUEsVUFBQSxDQUFBLFNBQUEsQ0FBQSxzQkFBQSxDQUFBLEtBQUEsQ0FEQTtBQUVBLEVBQUEsQ0FBQSxHQUFBLENBQUEsVUFBQSxDQUFBLFNBQUEsQ0FBQSxzQkFBQSxDQUFBLEtBQUEsQ0FGQTtBQUdBLEVBQUEsQ0FBQSxHQUFBLENBQUEsVUFBQSxDQUFBLFNBQUEsQ0FBQSxxQkFBQSxDQUFBLElBQUEsQ0FIQTtBQUlBO0FBQ0EsUUFBQSxDQUFB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LENBQUEsSUFBQSxDQUFBLEtBQUEsQ0FBQSxLQUFBLENBdkNBLENBd0NBLE9BQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQSxDQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsVUFBQSxDQUFBLEtBQUEsQ0FBQSxVQUFBLENBQUEsS0FBQSxDQXhDQSxDQXlDQSxLQUFBLENBQ0EsbUJBQ0EsQ0FBQSxDQUFBLE1BQUEsQ0FBQSxJQURBLENBRUEsV0FGQSxDQUdBLEtBSEEsQ0FJQSxXQUpBLENBS0EsS0FMQSxDQU1BLFlBTkEsQ0FPQSxRQVBBLENBUUEsSUFUQSxDQXpDQSxFQWdDQSxTQWhDQSxHQXNEQSxHQUFBLENBQUEscUJBdERBLEVBdURBLGNBQUEsQ0FBQSxDQUFBLENBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxLQUFBLENBQUEsS0FBQSxDQXZEQSxDQXdEQSxPQUFBLENBQUEsR0FBQSxDQUFBLENBQUEsQ0FBQSxNQUFBLENBQUEsSUFBQSxDQUFBLFVBQUEsQ0FBQSxLQUFBLENBQUEsVUFBQSxDQUFBLEtBQUEsQ0F4REEsQ0F5REEsS0FBQSxDQUNBLGNBQ0EsQ0FBQSxDQUFBLE1BQUEsQ0FBQSxJQURBLENBRUEsV0FGQSxDQUdBLEtBSEEsQ0FJQSxXQUpBLENBS0EsS0FMQSxDQU1BLFlBTkEsQ0FPQSxRQVBBLENBUUEsSUFUQSxDQXpEQSxFQWdDQSxTQWhDQSxHQXNFQSxHQUFBLENBQUEsb0JBdEVBLEVBdUVBLGNBQUEsQ0FBQSxDQUFBLENBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxLQUFBLENBQUEsS0FBQSxDQXZFQSxDQXdFQSxPQUFBLENBQUEsR0FBQSxDQUFBLENBQUEsQ0FBQSxNQUFBLENBQUEsSUFBQSxDQUFBLFVBQUEsQ0FBQSxLQUFBLENBQUEsVUFBQSxDQUFBLEtBQUEsQ0F4RUEsQ0F5RUEsS0FBQSxDQUNBLGFBQ0EsQ0FBQSxDQUFBLE1BQUEsQ0FBQSxJQURBLENBRUEsV0FGQSxDQUdBLEtBSEEsQ0FJQSxXQUpBLENBS0EsS0FMQSxDQU1BLFlBTkEsQ0FPQSxRQVBBLENBUUEsSUFUQSxDQXpFQSxH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LENBRUEsTUFBQSxDQUFBLFlBQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsUUFBQSxDQUZBLENBR0EsY0FBQSxDQUFBLFlBQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsZ0JBQUEsQ0FIQSxDQU5BLEdBV0EsQ0FBQSxDQUFBLENBQUEsSUFYQSxDQVlBLE9BQUEsQ0FBQSxFQVpBLENBYUEsUUFBQSxDQUFBLEVBYkEsQ0FxQkEsT0FBQSxDQUFBLE9BQUEsQ0FBQSxVQUFBLENBQUEsQ0FyQkEsQ0EwQkEsQ0FBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLE9BQUEsQ0ExQkEsSUNkQSxDQUFBLFVBQUEsQ0FBQSxzQ0RjQSxDQ2JBLGdCQUFBLENBQUEsUURhQSxDQ1VBLEdBQUEsQ0FBQSxHQUFBLENBQUEsSUFBQSxDQUVBLEdEWkEsR0NjQSxPQUFBLENBQUEscUJBQUEsQ0RkQSxDQ1lBLE9BQUEsQ0FBQSxrQkFBQSxDRFpBLElDaUJBLENBQUEsT0FBQSxDQUFBLElEakJBLENDa0JBLGtCQUFBLENBQUEsSURsQkEsQ0NtQkEseUJBQUEsQ0FBQSxJRG5CQSxDQ3FCQSxjQUFBLENBQUEsSURyQkEsQ0NzQkEsYUFBQSxDQUFBLElEdEJBLENDdUJBLDhCQUFBLENBQUEsSUR2QkE7O0FDd1VBLE9BQUEsQ0FBQSxlQUFBLENBQUEsZUR4VUE7QUN5VUEsT0FBQSxDQUFBLGNBQUEsQ0FBQSxjRHpVQTtBQzBVQSxPQUFBLENBQUEsTUFBQSxDQUFBLE1EMVVBOzs7Ozs7Ozs7O0FBdUNBLENBQUEsQ0FBQSxNQUFBLENBQUEsQ0FBQSxDQUFBLE9BQUEsQ0F2Q0E7QUF3Q0E7O0FBRUEsTUFBQSxDQUFBLE9BQUEsQ0FBQSxVIiwic291cmNlc0NvbnRlbnQiOlsidmFyIEFsbG95ID0gcmVxdWlyZSgnL2FsbG95JyksXG5cdEJhY2tib25lID0gQWxsb3kuQmFja2JvbmUsXG5cdF8gPSBBbGxveS5fO1xuXG5cblxuXG5mdW5jdGlvbiBfX3Byb2Nlc3NBcmcob2JqLCBrZXkpIHtcblx0dmFyIGFyZyA9IG51bGw7XG5cdGlmIChvYmopIHtcblx0XHRhcmcgPSBvYmpba2V5XSB8fCBudWxsO1xuXHR9XG5cdHJldHVybiBhcmc7XG59XG5cbmZ1bmN0aW9uIENvbnRyb2xsZXIoKSB7XG5cdFxuXHRyZXF1aXJlKCcvYWxsb3kvY29udHJvbGxlcnMvJyArICdCYXNlQ29udHJvbGxlcicpLmFwcGx5KHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuXHR0aGlzLl9fY29udHJvbGxlclBhdGggPSAnaW5ldF9iZWFjb24vYmVhY29uJztcblx0dGhpcy5hcmdzID0gYXJndW1lbnRzWzBdIHx8IHt9O1xuXG5cdGlmIChhcmd1bWVudHNbMF0pIHtcblx0XHR2YXIgX19wYXJlbnRTeW1ib2wgPSBfX3Byb2Nlc3NBcmcoYXJndW1lbnRzWzBdLCAnX19wYXJlbnRTeW1ib2wnKTtcblx0XHR2YXIgJG1vZGVsID0gX19wcm9jZXNzQXJnKGFyZ3VtZW50c1swXSwgJyRtb2RlbCcpO1xuXHRcdHZhciBfX2l0ZW1UZW1wbGF0ZSA9IF9fcHJvY2Vzc0FyZyhhcmd1bWVudHNbMF0sICdfX2l0ZW1UZW1wbGF0ZScpO1xuXHR9XG5cdHZhciAkID0gdGhpcztcblx0dmFyIGV4cG9ydHMgPSB7fTtcblx0dmFyIF9fZGVmZXJzID0ge307XG5cblx0Ly8gR2VuZXJhdGVkIGNvZGUgdGhhdCBtdXN0IGJlIGV4ZWN1dGVkIGJlZm9yZSBhbGwgVUkgYW5kL29yXG5cdC8vIGNvbnRyb2xsZXIgY29kZS4gT25lIGV4YW1wbGUgaXMgYWxsIG1vZGVsIGFuZCBjb2xsZWN0aW9uXG5cdC8vIGRlY2xhcmF0aW9ucyBmcm9tIG1hcmt1cC5cblx0XG5cblx0Ly8gR2VuZXJhdGVkIFVJIGNvZGVcblx0ZXhwb3J0cy5kZXN0cm95ID0gZnVuY3Rpb24gKCkge307XG5cblx0Ly8gbWFrZSBhbGwgSURlZCBlbGVtZW50cyBpbiAkLl9fdmlld3MgYXZhaWxhYmxlIHJpZ2h0IG9uIHRoZSAkIGluIGFcblx0Ly8gY29udHJvbGxlcidzIGludGVybmFsIGNvZGUuIEV4dGVybmFsbHkgdGhlIElEZWQgZWxlbWVudHMgd2lsbFxuXHQvLyBiZSBhY2Nlc3NlZCB3aXRoIGdldFZpZXcoKS5cblx0Xy5leHRlbmQoJCwgJC5fX3ZpZXdzKTtcblxuXHQvLyBDb250cm9sbGVyIGNvZGUgZGlyZWN0bHkgZnJvbSB0aGUgZGV2ZWxvcGVyJ3MgY29udHJvbGxlciBmaWxlXG5cdF9fTUFQTUFSS0VSX0NPTlRST0xMRVJfQ09ERV9fXG5cblx0Ly8gR2VuZXJhdGVkIGNvZGUgdGhhdCBtdXN0IGJlIGV4ZWN1dGVkIGFmdGVyIGFsbCBVSSBhbmRcblx0Ly8gY29udHJvbGxlciBjb2RlLiBPbmUgZXhhbXBsZSBkZWZlcnJlZCBldmVudCBoYW5kbGVycyB3aG9zZVxuXHQvLyBmdW5jdGlvbnMgYXJlIG5vdCBkZWZpbmVkIHVudGlsIGFmdGVyIHRoZSBjb250cm9sbGVyIGNvZGVcblx0Ly8gaXMgZXhlY3V0ZWQuXG5cdFxuXG5cdC8vIEV4dGVuZCB0aGUgJCBpbnN0YW5jZSB3aXRoIGFsbCBmdW5jdGlvbnMgYW5kIHByb3BlcnRpZXNcblx0Ly8gZGVmaW5lZCBvbiB0aGUgZXhwb3J0cyBvYmplY3QuXG5cdF8uZXh0ZW5kKCQsIGV4cG9ydHMpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbnRyb2xsZXI7XG4iLCIvLyBsZXQgYmVhY29uVVVJRCA9IFwiYzhhOTRmNDItM2NkNS00ODNhLThhZGMtOTc0NzMxOTdiOGI0XCI7XG5sZXQgYmVhY29uVVVJRCA9IFwiNTk5MWUxNjEtYmI0Ni00MzJmLTliZDgtYjI3MWY3NmY2N2Q5XCI7XG5sZXQgYmVhY29uSWRlbnRpZmllciA9IFwiTXlIb21lXCI7XG5cbmZ1bmN0aW9uIHJlc2V0U3RhdGVCZWFjb24oKSB7XG4gIFRpLkFwcC5Qcm9wZXJ0aWVzLnNldFN0cmluZyhcImluZXRCZWFjb25EYXRhX21ham9yXCIsIG51bGwpO1xuICBUaS5BcHAuUHJvcGVydGllcy5zZXRTdHJpbmcoXCJpbmV0QmVhY29uRGF0YV9taW5vclwiLCBudWxsKTtcbiAgVGkuQXBwLlByb3BlcnRpZXMuc2V0U3RyaW5nKFwiaW5ldEJlYWNvbkRhdGFfdXVpZFwiLCBudWxsKTtcbn1cbmZ1bmN0aW9uIHNldFN0YXRlQmVhY29uKHV1aWQsIG1pbm9yLCBtYWpvcikge1xuICBUaS5BcHAuUHJvcGVydGllcy5zZXRTdHJpbmcoXCJpbmV0QmVhY29uRGF0YV9tYWpvclwiLCBtYWpvcik7XG4gIFRpLkFwcC5Qcm9wZXJ0aWVzLnNldFN0cmluZyhcImluZXRCZWFjb25EYXRhX21pbm9yXCIsIG1pbm9yKTtcbiAgVGkuQXBwLlByb3BlcnRpZXMuc2V0U3RyaW5nKFwiaW5ldEJlYWNvbkRhdGFfdXVpZFwiLCB1dWlkKTtcbn1cbmZ1bmN0aW9uIGlzU2FtZVN0YXRlQmVmb3JlKHV1aWQsIG1pbm9yLCBtYWpvcikge1xuICBpZiAoXG4gIHV1aWQgPT0gVGkuQXBwLlByb3BlcnRpZXMuZ2V0U3RyaW5nKFwiaW5ldEJlYWNvbkRhdGFfdXVpZFwiKSAmJlxuICBtYWpvciA9PSBUaS5BcHAuUHJvcGVydGllcy5nZXRTdHJpbmcoXCJpbmV0QmVhY29uRGF0YV9tYWpvclwiKSAmJlxuICBtaW5vciA9PSBUaS5BcHAuUHJvcGVydGllcy5nZXRTdHJpbmcoXCJpbmV0QmVhY29uRGF0YV9taW5vclwiKSlcbiAge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxudmFyIEJMRSA9IG51bGw7XG5pZiAoT1NfSU9TKSB7XG4gIEJMRSA9IHJlcXVpcmUoXCJhcHBjZWxlcmF0b3IuYmxlXCIpO1xufSBlbHNlIHtcbiAgQkxFID0gcmVxdWlyZShcImNvbS5saWZlcmF5LmJlYWNvbnNcIik7XG59XG4vLyAtLS0gaW9zIC0tLS0tLS0tLS1cbnZhciBtYW5hZ2VyID0gbnVsbDtcbnZhciBpb3NEaWRSYW5nZUJlYWNvbnMgPSBudWxsO1xudmFyIGlvc0RpZENoYW5nZUF1dGhvcml6YXRpb24gPSBudWxsO1xuLy8gLS0tIGFuZHJvaWQgLS0tLS0tLS0tLVxudmFyIGFuZHJvaWRFbnRlcmVkID0gbnVsbDtcbnZhciBhbmRyb2lkRXhpdGVkID0gbnVsbDtcbnZhciBhbmRyb2lkQmVhY29uUHJveGltaXR5Q2FsbGJhY2sgPSBudWxsO1xuXG5mdW5jdGlvbiBiZWFjb25TdGFydFNjYW4oKSB7XG4gIHJlc2V0U3RhdGVCZWFjb24oKTtcbiAgaWYgKE9TX0lPUykge1xuICAgIC8vIC0tLS0tLS0tIElPUyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIGlvc0RpZENoYW5nZUF1dGhvcml6YXRpb24gPSAoZSkgPT4ge1xuICAgICAgVGkuQVBJLmluZm8oXCJkaWRDaGFuZ2VBdXRob3JpemF0aW9uXCIpO1xuICAgICAgc3dpdGNoIChlLnN0YXRlKSB7XG4gICAgICAgIGNhc2UgQkxFLkxPQ0FUSU9OX01BTkFHRVJfQVVUSE9SSVpBVElPTl9TVEFUVVNfQVVUSE9SSVpFRF9BTFdBWVM6XG4gICAgICAgICAgYWxlcnQoXCJNYW5hZ2VyIGF1dGhvcml6YXRpb24gaXMgYWx3YXlzXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEJMRS5MT0NBVElPTl9NQU5BR0VSX0FVVEhPUklaQVRJT05fU1RBVFVTX0FVVEhPUklaRURfV0hFTl9JTl9VU0U6XG4gICAgICAgICAgYWxlcnQoXCJNYW5hZ2VyIGF1dGhvcml6YXRpb24gaXMgd2hlbiBpbiB1c2VcIik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQkxFLkxPQ0FUSU9OX01BTkFHRVJfQVVUSE9SSVpBVElPTl9TVEFUVVNfREVOSUVEOlxuICAgICAgICAgIGFsZXJ0KFwiTWFuYWdlciBhdXRob3JpemF0aW9uIGlzIGRlbmllZFwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBCTEUuTE9DQVRJT05fTUFOQUdFUl9BVVRIT1JJWkFUSU9OX1NUQVRVU19OT1RfREVURVJNSU5FRDpcbiAgICAgICAgICBhbGVydChcIk1hbmFnZXIgYXV0aG9yaXphdGlvbiBpcyBub3QgZGV0ZXJtaW5lZFwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBCTEUuTE9DQVRJT05fTUFOQUdFUl9BVVRIT1JJWkFUSU9OX1NUQVRVU19SRVNUUklDVEVEOlxuICAgICAgICAgIGFsZXJ0KFwiTWFuYWdlciBhdXRob3JpemF0aW9uIGlzIHBvd2VyZWQgcmVzdHJpY3RlZFwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBhbGVydChcIlVua25vd25cIik7XG4gICAgICAgICAgYnJlYWs7fVxuXG4gICAgfTtcblxuICAgIGlvc0RpZFJhbmdlQmVhY29ucyA9IChlKSA9PiB7XG5cbiAgICAgIFRpLkFQSS5pbmZvKFwiZGlkUmFuZ2VCZWFjb25zXCIpO1xuICAgICAgdmFyIGJlY2FvbnMgPSBlLmJlYWNvbnM7XG5cbiAgICAgIGlmIChiZWNhb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIk5vIGJlYWNvbiBpbiByYW5nZVwiKTtcbiAgICAgICAgaWYgKFRpLkFwcC5Qcm9wZXJ0aWVzLmdldFN0cmluZyhcImluZXRCZWFjb25EYXRhX3V1aWRcIikgIT09IG51bGwpIHtcbiAgICAgICAgICBhbGVydChcbiAgICAgICAgICBcIkV4aXQgdXVpZDogXCIgK1xuICAgICAgICAgIFRpLkFwcC5Qcm9wZXJ0aWVzLmdldFN0cmluZyhcImluZXRCZWFjb25EYXRhX3V1aWRcIikgK1xuICAgICAgICAgIFwiICBNYWpvcjogXCIgK1xuICAgICAgICAgIFRpLkFwcC5Qcm9wZXJ0aWVzLmdldFN0cmluZyhcImluZXRCZWFjb25EYXRhX21ham9yXCIpICtcbiAgICAgICAgICBcIiAgTWlub3I6IFwiICtcbiAgICAgICAgICBUaS5BcHAuUHJvcGVydGllcy5nZXRTdHJpbmcoXCJpbmV0QmVhY29uRGF0YV9taW5vclwiKSk7XG5cbiAgICAgICAgICByZXNldFN0YXRlQmVhY29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgcHJveGltaXR5ID0gYmVjYW9uc1swXS5wcm94aW1pdHk7XG4gICAgICB2YXIgYWNjdXJhY3kgPSBiZWNhb25zWzBdLmFjY3VyYWN5O1xuICAgICAgdmFyIG1ham9yID0gYmVjYW9uc1swXS5tYWpvcjtcbiAgICAgIHZhciBtaW5vciA9IGJlY2FvbnNbMF0ubWlub3I7XG4gICAgICB2YXIgaGF2ZUNhc2UgPSB0cnVlO1xuXG4gICAgICAvLyBjaGVjayBzdGF0ZSBiZWZvcmVcbiAgICAgIGlmIChpc1NhbWVTdGF0ZUJlZm9yZShlLnJlZ2lvbi51dWlkLCBtYWpvciwgbWlub3IpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc3dpdGNoIChwcm94aW1pdHkpIHtcbiAgICAgICAgY2FzZSBCTEUuQkVBQ09OX1BST1hJTUlUWV9VTktOT1dOOlxuICAgICAgICAgIGFsZXJ0KFwiQmVhY29uIExvY2F0aW9uIDogVU5LTk9XTlwiKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIEJMRS5CRUFDT05fUFJPWElNSVRZX0lNTUVESUFURTpcbiAgICAgICAgICAvLyBzZXQgYmVhY29uIHN0YXRlIG9ubHksIGJ1dCBub3QgdXNlIHByb3hpbWl0eVxuICAgICAgICAgIHNldFN0YXRlQmVhY29uKGUucmVnaW9uLnV1aWQsIG1ham9yLCBtaW5vcik7XG4gICAgICAgICAgY29uc29sZS5sb2coZS5yZWdpb24udXVpZCArIFwiIE1ham9yOiBcIiArIG1ham9yICsgXCIgTWlub3I6IFwiICsgbWlub3IpO1xuICAgICAgICAgIGFsZXJ0KFxuICAgICAgICAgIFwiSU1NRURJQVRFIHV1aWQ6IFwiICtcbiAgICAgICAgICBlLnJlZ2lvbi51dWlkICtcbiAgICAgICAgICBcIiAgTWFqb3I6IFwiICtcbiAgICAgICAgICBtYWpvciArXG4gICAgICAgICAgXCIgIE1pbm9yOiBcIiArXG4gICAgICAgICAgbWlub3IgK1xuICAgICAgICAgIFwiICBBcHByb3g6IFwiICtcbiAgICAgICAgICBhY2N1cmFjeSArXG4gICAgICAgICAgXCJtKVwiKTtcblxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQkxFLkJFQUNPTl9QUk9YSU1JVFlfTkVBUjpcbiAgICAgICAgICBzZXRTdGF0ZUJlYWNvbihlLnJlZ2lvbi51dWlkLCBtYWpvciwgbWlub3IpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGUucmVnaW9uLnV1aWQgKyBcIiBNYWpvcjogXCIgKyBtYWpvciArIFwiIE1pbm9yOiBcIiArIG1pbm9yKTtcbiAgICAgICAgICBhbGVydChcbiAgICAgICAgICBcIk5FQVIgdXVpZDogXCIgK1xuICAgICAgICAgIGUucmVnaW9uLnV1aWQgK1xuICAgICAgICAgIFwiICBNYWpvcjogXCIgK1xuICAgICAgICAgIG1ham9yICtcbiAgICAgICAgICBcIiAgTWlub3I6IFwiICtcbiAgICAgICAgICBtaW5vciArXG4gICAgICAgICAgXCIgIEFwcHJveDogXCIgK1xuICAgICAgICAgIGFjY3VyYWN5ICtcbiAgICAgICAgICBcIm0pXCIpO1xuXG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBCTEUuQkVBQ09OX1BST1hJTUlUWV9GQVI6XG4gICAgICAgICAgc2V0U3RhdGVCZWFjb24oZS5yZWdpb24udXVpZCwgbWFqb3IsIG1pbm9yKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlLnJlZ2lvbi51dWlkICsgXCIgTWFqb3I6IFwiICsgbWFqb3IgKyBcIiBNaW5vcjogXCIgKyBtaW5vcik7XG4gICAgICAgICAgYWxlcnQoXG4gICAgICAgICAgXCJGQVIgdXVpZDogXCIgK1xuICAgICAgICAgIGUucmVnaW9uLnV1aWQgK1xuICAgICAgICAgIFwiICBNYWpvcjogXCIgK1xuICAgICAgICAgIG1ham9yICtcbiAgICAgICAgICBcIiAgTWlub3I6IFwiICtcbiAgICAgICAgICBtaW5vciArXG4gICAgICAgICAgXCIgIEFwcHJveDogXCIgK1xuICAgICAgICAgIGFjY3VyYWN5ICtcbiAgICAgICAgICBcIm0pXCIpO1xuXG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBoYXZlQ2FzZSA9IGZhbHNlO1xuICAgICAgICAgIGFsZXJ0KFwiQmVhY29uIExvY2F0aW9uIDogVU5LTk9XTlwiKTtcbiAgICAgICAgICBicmVhazt9XG5cblxuICAgICAgaWYgKGhhdmVDYXNlKSB7XG4gICAgICAgIHB1dEFwaShtYWpvciwgbWlub3IpO1xuICAgICAgfVxuXG4gICAgfTtcblxuICAgIGlmIChtYW5hZ2VyID09PSBudWxsKSB7XG4gICAgICBtYW5hZ2VyID0gQkxFLmNyZWF0ZVJlZ2lvbk1hbmFnZXIoKTtcbiAgICAgIG1hbmFnZXIuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwiZGlkQ2hhbmdlQXV0aG9yaXphdGlvblwiLFxuICAgICAgaW9zRGlkQ2hhbmdlQXV0aG9yaXphdGlvbik7XG5cbiAgICAgIG1hbmFnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImRpZFJhbmdlQmVhY29uc1wiLCBpb3NEaWRSYW5nZUJlYWNvbnMpO1xuXG4gICAgICB2YXIgYmVhY29uUmVnaW9uID0gQkxFLmNyZWF0ZUJlYWNvblJlZ2lvbih7XG4gICAgICAgIHV1aWQ6IGJlYWNvblVVSUQsXG4gICAgICAgIC8vIG1ham9yOiAzMjc3MixcbiAgICAgICAgLy8gbWlub3I6IDMsXG4gICAgICAgIGlkZW50aWZpZXI6IGJlYWNvbklkZW50aWZpZXIgfSk7XG5cbiAgICAgIG1hbmFnZXIuc3RhcnRSZWdpb25Nb25pdG9yaW5nKHtcbiAgICAgICAgYmVhY29uUmVnaW9uOiBiZWFjb25SZWdpb24gfSk7XG5cbiAgICAgIG1hbmFnZXIuc3RhcnRSYW5naW5nQmVhY29uc0luUmVnaW9uKHtcbiAgICAgICAgYmVhY29uUmVnaW9uOiBiZWFjb25SZWdpb24gfSk7XG5cbiAgICB9XG5cbiAgfSBlbHNlIHtcbiAgICAvLyAtLS0tLS0tLSBBbmRyb2lkIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gQ2hlY2sgUGVybWlzc2lvbiBMb2NhdGlvblxuICAgIHZhciBwZXJtaXNzaW9ucyA9IFtcImFuZHJvaWQucGVybWlzc2lvbi5BQ0NFU1NfRklORV9MT0NBVElPTlwiXTtcbiAgICBUaS5BbmRyb2lkLnJlcXVlc3RQZXJtaXNzaW9ucyhwZXJtaXNzaW9ucywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmIChlLnN1Y2Nlc3MpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJhbGxvdyBsb2NhdGlvbiBzdWNjZXNzXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJub3QgYWxsb3cgbG9jYXRpb25cIik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvL2FuZHJvaWRFbnRlcmVkIGNhbGxiYWNrXG4gICAgdmFyIGlzRW50ZXJSZWdpb24gPSBmYWxzZTtcbiAgICBhbmRyb2lkRW50ZXJlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBsZXQgdGFnID0gXCJhbmRyb2lkRW50ZXJlZDpcIjtcbiAgICAgIGNvbnNvbGUubG9nKHRhZywgXCJlbnRlcmVkIHJlZ2lvbiBpZGVudGlmZXI6IFwiICsgZS5pZGVudGlmaWVyKTtcbiAgICAgIGNvbnNvbGUubG9nKHRhZywgZSk7XG4gICAgICBpc0VudGVyUmVnaW9uID0gdHJ1ZTtcbiAgICAgIGFsZXJ0KFxuICAgICAgdGFnICsgXCJFbnRlclwiKTtcblxuICAgIH07XG5cbiAgICAvL2FuZHJvaWRCZWFjb25Qcm94aW1pdHlDYWxsYmFja1xuICAgIGFuZHJvaWRCZWFjb25Qcm94aW1pdHlDYWxsYmFjayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBsZXQgdGFnID0gXCJwcm94Q2FsbGJhY2s6XCI7XG4gICAgICBpZiAoaXNFbnRlclJlZ2lvbikge1xuICAgICAgICAvLyBjaGVjayBpcyBzYW1lIHN0YXRlIGJlZm9yXG4gICAgICAgIGlmIChpc1NhbWVTdGF0ZUJlZm9yZShlLnV1aWQsIGUubWFqb3IsIGUubWlub3IpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2codGFnLCBcIlNhbWUgYmVhY29uXCIpO1xuICAgICAgICAgIGlzQ29uZmlybUV4aXQgPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8ganVzdCByZWNvcmQgYmVhY29uLCBub3QgdXNlIHByb3hpbWl0eVxuICAgICAgICBzZXRTdGF0ZUJlYWNvbihlLnV1aWQsIGUubWFqb3IsIGUubWlub3IpO1xuICAgICAgICBhbGVydChcbiAgICAgICAgdGFnICsgXCIgXCIgKyBlLnV1aWQgKyBcIiBNYWpvcjogXCIgKyBlLm1ham9yICsgXCIgTWlub3I6IFwiICsgZS5taW5vcik7XG5cbiAgICAgICAgLy9wdXQgbWVzc2FnZSB0byBib3RcbiAgICAgICAgcHV0QXBpKGUubWFqb3IsIGUubWlub3IpO1xuICAgICAgICBpc0VudGVyUmVnaW9uID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyh0YWcsIFwiaWRlbnRpZmVyOiBcIiArIGUuaWRlbnRpZmllcik7XG4gICAgICBjb25zb2xlLmxvZyh0YWcsIFwidXVpZDogXCIgKyBlLnV1aWQpO1xuICAgICAgY29uc29sZS5sb2codGFnLCBcIm1ham9yOiBcIiArIGUubWFqb3IpO1xuICAgICAgY29uc29sZS5sb2codGFnLCBcIm1pbm9yOiBcIiArIGUubWlub3IpO1xuICAgICAgY29uc29sZS5sb2codGFnLCBcInByb3hpbWl0eTogXCIgKyBlLnByb3hpbWl0eSk7XG4gICAgICBjb25zb2xlLmxvZyh0YWcsIFwiYWNjdXJhY3k6IFwiICsgZS5hY2N1cmFjeSk7XG4gICAgICBjb25zb2xlLmxvZyh0YWcsIFwicnNzaTogXCIgKyBlLnJzc2kpO1xuICAgICAgY29uc29sZS5sb2codGFnLCBcInBvd2VyOiBcIiArIGUucG93ZXIpO1xuICAgIH07XG5cbiAgICAvL2FuZHJvaWRFeGl0ZWQgY2FsbGJhY2tcbiAgICB2YXIgaGFuZGxlID0gbnVsbDtcbiAgICB2YXIgaXNDb25maXJtRXhpdCA9IGZhbHNlO1xuICAgIGFuZHJvaWRFeGl0ZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgaXNDb25maXJtRXhpdCA9IHRydWU7XG4gICAgICBjb25zb2xlLmxvZyhcImV4aXRlZCByZWdpb24gaWRlbnRpZmVyOiBcIiArIGUuaWRlbnRpZmllcik7XG5cbiAgICAgIGlmIChUaS5BcHAuUHJvcGVydGllcy5nZXRTdHJpbmcoXCJpbmV0QmVhY29uRGF0YV91dWlkXCIpICE9PSBudWxsICYmIGhhbmRsZSA9PSBudWxsKSB7XG4gICAgICAgIHZhciBjb3VudEV4aXQgPSAwO1xuICAgICAgICBoYW5kbGUgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJpc0NvbmZpcm1FeGl0OiBcIiArIGlzQ29uZmlybUV4aXQpO1xuICAgICAgICAgIGlmIChjb3VudEV4aXQgPiA2MCAmJiBpc0NvbmZpcm1FeGl0KSB7XG4gICAgICAgICAgICAvLyBDb25maXJtIGV4aXRlZCBzaWduYWxcbiAgICAgICAgICAgIGFsZXJ0KFxuICAgICAgICAgICAgXCJFeGl0IHV1aWQ6IFwiICtcbiAgICAgICAgICAgIFRpLkFwcC5Qcm9wZXJ0aWVzLmdldFN0cmluZyhcImluZXRCZWFjb25EYXRhX3V1aWRcIikgK1xuICAgICAgICAgICAgXCIgIE1ham9yOiBcIiArXG4gICAgICAgICAgICBUaS5BcHAuUHJvcGVydGllcy5nZXRTdHJpbmcoXCJpbmV0QmVhY29uRGF0YV9tYWpvclwiKSArXG4gICAgICAgICAgICBcIiAgTWlub3I6IFwiICtcbiAgICAgICAgICAgIFRpLkFwcC5Qcm9wZXJ0aWVzLmdldFN0cmluZyhcImluZXRCZWFjb25EYXRhX21pbm9yXCIpKTtcblxuICAgICAgICAgICAgcmVzZXRTdGF0ZUJlYWNvbigpO1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChoYW5kbGUpO1xuICAgICAgICAgICAgaGFuZGxlID0gbnVsbDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaXQncyByZWFsbHkgZXhpdCBcIiArIGhhbmRsZSk7XG4gICAgICAgICAgfSBlbHNlIGlmICghaXNDb25maXJtRXhpdCkge1xuICAgICAgICAgICAgLy8gUmVzZXQgQ29uZmlybSBFeGl0IEludGVydmFsXG4gICAgICAgICAgICBjbGVhckludGVydmFsKGhhbmRsZSk7XG4gICAgICAgICAgICBoYW5kbGUgPSBudWxsO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJpdCdzIG5vdCBleGl0IFwiICsgaGFuZGxlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY291bnRFeGl0Kys7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJjb3VudDogXCIgKyBjb3VudEV4aXQpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSwgMTAwMCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEJMRS5hZGRFdmVudExpc3RlbmVyKFwiZW50ZXJlZFJlZ2lvblwiLCBhbmRyb2lkRW50ZXJlZCk7XG4gICAgQkxFLmFkZEV2ZW50TGlzdGVuZXIoXCJleGl0ZWRSZWdpb25cIiwgYW5kcm9pZEV4aXRlZCk7XG4gICAgQkxFLmFkZEV2ZW50TGlzdGVuZXIoXCJiZWFjb25Qcm94aW1pdHlcIiwgYW5kcm9pZEJlYWNvblByb3hpbWl0eUNhbGxiYWNrKTtcblxuICAgIC8vIEFpcnBvcnRzIEJlYWNvblxuICAgIC8vIFVVSUQ6IDU5OTFlMTYxLWJiNDYtNDMyZi05YmQ4LWIyNzFmNzZmNjdkOVxuXG4gICAgLy8gTXlIb21lXG4gICAgLy8gYzhhOTRmNDItM2NkNS00ODNhLThhZGMtOTc0NzMxOTdiOGI0XG4gICAgQkxFLnN0YXJ0TW9uaXRvcmluZ0ZvclJlZ2lvbih7XG4gICAgICBpZGVudGlmaWVyOiBiZWFjb25JZGVudGlmaWVyLFxuICAgICAgdXVpZDogYmVhY29uVVVJRCB9KTtcblxuICAgIEJMRS5zZXRCYWNrZ3JvdW5kTW9kZShmYWxzZSk7XG5cbiAgICBCTEUuc2V0U2NhblBlcmlvZHMoe1xuICAgICAgZm9yZWdyb3VuZFNjYW5QZXJpb2Q6IDUwMDAsXG4gICAgICBmb3JlZ3JvdW5kQmV0d2VlblNjYW5QZXJpb2Q6IDIwMCxcbiAgICAgIGJhY2tncm91bmRTY2FuUGVyaW9kOiA1MDAwLFxuICAgICAgYmFja2dyb3VuZEJldHdlZW5TY2FuUGVyaW9kOiAyMDAgfSk7XG5cbiAgICAvLyBlbmQgYW5kcm9pZFxuICB9XG59XG5cbmZ1bmN0aW9uIGJlYWNvblN0b3BTY2FuKCkge1xuICByZXNldFN0YXRlQmVhY29uKCk7XG4gIGlmIChPU19JT1MpIHtcbiAgICBtYW5hZ2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgXCJkaWRDaGFuZ2VBdXRob3JpemF0aW9uXCIsXG4gICAgaW9zRGlkQ2hhbmdlQXV0aG9yaXphdGlvbik7XG5cbiAgICBtYW5hZ2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkaWRSYW5nZUJlYWNvbnNcIiwgaW9zRGlkUmFuZ2VCZWFjb25zKTtcbiAgfSBlbHNlIHtcbiAgICBCTEUuc3RvcE1vbml0b3JpbmdBbGxSZWdpb25zKCk7XG4gICAgQkxFLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlbnRlcmVkUmVnaW9uXCIsIGFuZHJvaWRFbnRlcmVkKTtcbiAgICBCTEUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImV4aXRlZFJlZ2lvblwiLCBhbmRyb2lkRXhpdGVkKTtcbiAgICBCTEUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJlYWNvblByb3hpbWl0eVwiLCBhbmRyb2lkQmVhY29uUHJveGltaXR5Q2FsbGJhY2spO1xuICB9XG59XG5cbmZ1bmN0aW9uIHB1dEFwaShtYWpvciwgbWlub3IpIHtcbiAgdmFyIHhociA9IFRpLk5ldHdvcmsuY3JlYXRlSFRUUENsaWVudCgpO1xuICB4aHIub25sb2FkID0gZnVuY3Rpb24gKGUpIHtcbiAgICBjb25zb2xlLmxvZyh0aGlzLnN0YXR1cyk7XG4gICAgY29uc29sZS5sb2codGhpcy5yZXNwb25zZVRleHQpO1xuICB9O1xuICB4aHIub25lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgY29uc29sZS5sb2codGhpcy5zdGF0dXMpO1xuICAgIGNvbnNvbGUubG9nKHRoaXMucmVzcG9uc2VUZXh0KTtcbiAgfTtcbiAgeGhyLnRpbWVvdXQgPSAxMDAwMDtcbiAgLy8geGhyLm9wZW4oJ1BVVCcsJ2h0dHBzOi8vbW9ycHJvbS1iZWFjb24ubmV4cGllLmlvJyk7XG4gIHhoci5vcGVuKCdQVVQnLCAnaHR0cHM6Ly9iZWFjb24tdHJhY2suaW5ldC5jby50aCcpO1xuICB4aHIuc2V0UmVxdWVzdEhlYWRlcignWC1BUEktS0VZJywgJ1J2Qm1sbDlvcEVuVlozYUJINnd5Z043VlhLcjdESVl3Jyk7XG4gIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiY29udGVudC10eXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgdmFyIHBhcmFtcyA9IHtcbiAgICB1aWQ6IFRpLkFwcC5Qcm9wZXJ0aWVzLmdldFN0cmluZyhcImluZXRCZWFjb25EYXRhX2NpZFwiKSxcbiAgICBtYWpvcjogbWFqb3IsXG4gICAgbWlub3I6IG1pbm9yIH07XG5cbiAgeGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkocGFyYW1zKSk7XG59XG5cbmV4cG9ydHMuYmVhY29uU3RhcnRTY2FuID0gYmVhY29uU3RhcnRTY2FuO1xuZXhwb3J0cy5iZWFjb25TdG9wU2NhbiA9IGJlYWNvblN0b3BTY2FuO1xuZXhwb3J0cy5wdXRBcGkgPSBwdXRBcGk7Il0sInNvdXJjZVJvb3QiOiJkOlxcR0lBTlRcXHd3MlxcaW5ldHRpYmVhY29uIn0=
