var Alloy=require("/alloy"),
Backbone=Alloy.Backbone,
_=Alloy._;




function __processArg(obj,key){
var arg=null;



return obj&&(arg=obj[key]||null),arg;
}

function Controller(){var _Mathfloor=











































































































































































































































































Math.floor;function resetStateBeacon(){Ti.App.Properties.setString("inetBeaconData_major",null),Ti.App.Properties.setString("inetBeaconData_minor",null),Ti.App.Properties.setString("inetBeaconData_uuid",null)}function setStateBeacon(uuid,minor,major){Ti.App.Properties.setString("inetBeaconData_major",major),Ti.App.Properties.setString("inetBeaconData_minor",minor),Ti.App.Properties.setString("inetBeaconData_uuid",uuid)}function isSameStateBefore(uuid,minor,major){return uuid==Ti.App.Properties.getString("inetBeaconData_uuid")&&major==Ti.App.Properties.getString("inetBeaconData_major")&&minor==Ti.App.Properties.getString("inetBeaconData_minor")}function isInterestedRegion(rssi){tag="isInterestRegion:";let min_rssi=-96;return!(-96>=rssi)}function beaconStartScan(){if(resetStateBeacon(),!0){var permissions=["android.permission.ACCESS_FINE_LOCATION"];Ti.Android.requestPermissions(permissions,function(e){e.success?console.log("allow location success"):console.log("not allow location")}),console.log("after check perm:",_Mathfloor(Date.now())),

androidBindingCallback=function(e){
tag="androidBindingCallback: ",
console.log(tag,e);
},

inBeconRange=function(e){
var tag="beaconRanges: ";
console.log("beaconRanges: ","I am in the "+e.identifier+" region"),
console.log("beaconRanges: ","I see "+e.beacons.length+" beacons in this region:"),
console.log("beaconRanges: ","----------------"),
e.beacons.forEach(function(beacon,index){


console.log("beaconRanges: ","Beacon number: "+index),
console.log("beaconRanges: ","uuid: "+beacon.uuid),
console.log("beaconRanges: ","major: "+beacon.major),
console.log("beaconRanges: ","minor: "+beacon.minor),
console.log("beaconRanges: ","proximity: "+beacon.proximity),
console.log("beaconRanges: ","accuracy: "+beacon.accuracy),
console.log("beaconRanges: ","rssi: "+beacon.rssi),
console.log("beaconRanges: ","power: "+beacon.power),
console.log("----------------");

var beacon_key=beacon.major+"-"+beacon.minor;
beacon_key in global_beacons?

console.log(beacon_key+" beacon was recorded"):



isInterestedRegion(beacon.rssi)?(

console.log("beaconRanges: ","call location api"),
global_beacons[beacon_key]={
major:beacon.major,
minor:beacon.minor,
rssi:beacon.rssi,
location:"\u0E01\u0E33\u0E25\u0E31\u0E07\u0E04\u0E49\u0E19\u0E2B\u0E32\u0E15\u0E33\u0E41\u0E2B\u0E19\u0E48\u0E07",
isRegistered:!1,
ts:new Date().getTime()},


getLocation(beacon.major,beacon.minor,beacon_key)):



console.log("Not interesed region.");


});
},

BLE.addEventListener("beaconRanges",inBeconRange);

var regionState=function(e){
var tag="regionState: ";
console.log("regionState: ","identifer: "+e.regionState);
};

BLE.addEventListener("onIBeaconServiceConnect",androidBindingCallback),

console.log("add evnt complete:",_Mathfloor(Date.now()));var

when_ready,
not_ready_count=0;

BLE.bindBeaconService(),

when_ready=setInterval(function(){return(
BLE.isReady()?(







Ti.API.info("Try",not_ready_count,"time, ","Okay! Module is ready!"),


BLE.checkAvailability()?void(





BLE.setBackgroundMode(!1),
BLE.setScanPeriods({
foregroundScanPeriod:5e3,
foregroundBetweenScanPeriod:200,
backgroundScanPeriod:5e3,
backgroundBetweenScanPeriod:200}),


BLE.startMonitoringForRegion({
identifier:beaconIdentifier,
uuid:beaconUUID}),


clearInterval(when_ready),
when_ready=null):void alert("It's not support in your device!")):(console.log("not_ready_count=",not_ready_count),console.log("BLE Not ready"),void not_ready_count++));
},1e3);

var monit;

monit=setInterval(function(){

if(!1)


return console.log("App in background. Stop scan."),void BLE.stopScan();

});

}else if(iosDidChangeAuthorization=(e)=>{switch(Ti.API.info("didChangeAuthorization"),e.state){case BLE.LOCATION_MANAGER_AUTHORIZATION_STATUS_AUTHORIZED_ALWAYS:alert("Manager authorization is always");break;case BLE.LOCATION_MANAGER_AUTHORIZATION_STATUS_AUTHORIZED_WHEN_IN_USE:alert("Manager authorization is when in use");break;case BLE.LOCATION_MANAGER_AUTHORIZATION_STATUS_DENIED:alert("Manager authorization is denied");break;case BLE.LOCATION_MANAGER_AUTHORIZATION_STATUS_NOT_DETERMINED:alert("Manager authorization is not determined");break;case BLE.LOCATION_MANAGER_AUTHORIZATION_STATUS_RESTRICTED:alert("Manager authorization is powered restricted");break;default:alert("Unknown");}},iosDidRangeBeacons=(e)=>{Ti.API.info("didRangeBeacons");var becaons=e.beacons;if(0===becaons.length)return console.log("No beacon in range"),void(null!==Ti.App.Properties.getString("inetBeaconData_uuid")&&(alert("Exit uuid: "+Ti.App.Properties.getString("inetBeaconData_uuid")+"  Major: "+Ti.App.Properties.getString("inetBeaconData_major")+"  Minor: "+Ti.App.Properties.getString("inetBeaconData_minor")),resetStateBeacon()));var proximity=becaons[0].proximity,accuracy=becaons[0].accuracy,major=becaons[0].major,minor=becaons[0].minor,haveCase=!0;(isInterestedRegion(proximity)||console.log("Too far..."),!isSameStateBefore(e.region.uuid,major,minor))&&(proximity===BLE.BEACON_PROXIMITY_UNKNOWN?alert("Beacon Location : UNKNOWN"):proximity===BLE.BEACON_PROXIMITY_IMMEDIATE?(setStateBeacon(e.region.uuid,major,minor),console.log(e.region.uuid+" Major: "+major+" Minor: "+minor),alert("IMMEDIATE uuid: "+e.region.uuid+"  Major: "+major+"  Minor: "+minor+"  Approx: "+accuracy+"m)")):proximity===BLE.BEACON_PROXIMITY_NEAR?(setStateBeacon(e.region.uuid,major,minor),console.log(e.region.uuid+" Major: "+major+" Minor: "+minor),alert("NEAR uuid: "+e.region.uuid+"  Major: "+major+"  Minor: "+minor+"  Approx: "+accuracy+"m)")):proximity===BLE.BEACON_PROXIMITY_FAR?(setStateBeacon(e.region.uuid,major,minor),console.log(e.region.uuid+" Major: "+major+" Minor: "+minor),alert("FAR uuid: "+e.region.uuid+"  Major: "+major+"  Minor: "+minor+"  Approx: "+accuracy+"m)")):(haveCase=!1,alert("Beacon Location : UNKNOWN")),haveCase)},null===manager){manager=BLE.createRegionManager(),manager.addEventListener("didChangeAuthorization",iosDidChangeAuthorization),manager.addEventListener("didRangeBeacons",iosDidRangeBeacons);var beaconRegion=BLE.createBeaconRegion({uuid:beaconUUID,identifier:beaconIdentifier});manager.startRegionMonitoring({beaconRegion:beaconRegion}),manager.startRangingBeaconsInRegion({beaconRegion:beaconRegion})}
}


















function beaconStopScan(){
resetStateBeacon(),1?(







BLE.stopMonitoringAllRegions(),
BLE.removeEventListener("beaconRanges",inBeconRange)):(manager.removeEventListener("didChangeAuthorization",iosDidChangeAuthorization),manager.removeEventListener("didRangeBeacons",iosDidRangeBeacons));

}

function getLocation(this_major,this_minor,this_key){
tag="getLocation: ";var
xhr=Ti.Network.createHTTPClient(),

my_loc_code=md5_hash(`b1cf4b7ec203:1:${this_major}:${this_minor}`);
console.log(tag+"my_hash: "+my_loc_code+" major:"+this_major+" minor:"+this_minor),

xhr.onload=function(e){
var res_json={};
console.log(tag,this.status),
console.log(tag,this.responseText),

res_json=JSON.parse(this.responseText),
global_beacons[this_key].isRegistered=!0,
console.log(tag,"res_json=",res_json),


global_beacons[this_key].location="site_name"in res_json?res_json.site_name:



"-",

"location_name"in res_json&&(

global_beacons[this_key].location=global_beacons[this_key].location+" "+res_json.location_name),

alert(tag+this_key+":"+global_beacons[this_key].location);
},

xhr.onerror=function(e){
console.log(tag,this.status),
console.log(tag,this.responseText),


global_beacons[this_key].location=(this.status=404)?`ไม่พบตำแหน่ง ${global_beacons[this_key].major}/${global_beacons[this_key].major} ในระบบ`:



"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E25\u0E2D\u0E07\u0E43\u0E2B\u0E21\u0E48";

},
xhr.timeout=1e4,
xhr.open("GET","https://beacon-track.inet.co.th/beaconinfo?code="+my_loc_code),
xhr.setRequestHeader("content-type","application/json"),
xhr.send();
}

function sortByProperty(property){
var tag="sortByProp: ";
return function(a,b){return(
a[property]>b[property]?(


console.log(a.location+" "+a[property]+">"+b.location+" "+b[property]),
-1):

a[property]<b[property]?(


console.log(a.location+" "+a[property]+"<"+b.location+" "+b[property]),
1):

0);
};
}

function getLocationList()
{var
tag="getLocationList: ",
global_location=[],
location_list="";


for(var prop in global_beacons)
console.log("getLocationList: ","beacon ",global_beacons[prop]),

global_beacons[prop].isRegistered&&


global_location.push(global_beacons[prop]);









































return console.log("getLocationList: ","global_location=",global_location),global_location.sort(sortByProperty("rssi")),global_location.forEach(function(sort_loc,index){console.log("getLocationList: ","### sort_id=",index,"data=",sort_loc),location_list=location_list+sort_loc.location+" major="+sort_loc.major+" minor="+sort_loc.minor+" rssi="+sort_loc.rssi+"; "}),alert("getLocationList: sorted_loc="+location_list),global_location;
}

function md5_hash(hash_seed){var
tag="md5_hash",
my_md5=Ti.Utils.md5HexDigest(hash_seed);
return my_md5;
}if(require("/alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="inet_beacon/beacon",this.args=arguments[0]||{},arguments[0])var __parentSymbol=__processArg(arguments[0],"__parentSymbol"),$model=__processArg(arguments[0],"$model"),__itemTemplate=__processArg(arguments[0],"__itemTemplate");var $=this,exports={},__defers={};exports.destroy=function(){},_.extend($,$.__views);let beaconUUID="5991e161-bb46-432f-9bd8-b271f76f67d9",beaconIdentifier="Morprom",global_beacons={};Ti.App.Properties.setString("f_beacon",""),console.log("begin:",_Mathfloor(Date.now()));var BLE=null,isForeground=!0;BLE=1?require("com.liferay.beacons"):require("appcelerator.ble"),console.log("after lode lib:",_Mathfloor(Date.now()));var manager=null,iosDidRangeBeacons=null,iosDidChangeAuthorization=null,inBeconRange=null,clearBCCache=setInterval(function(){var tag="timeToClearBCCach?: ";for(var prop in global_beacons){var dTs=new Date().getTime()-global_beacons[prop].ts;console.log("timeToClearBCCach?: "+global_beacons[prop].location+" dTs="+global_beacons[prop].ts+" ms"),300000<dTs?(console.log("Yes, clear beacon cache."),delete global_beacons[prop]):console.log("timeToClearBCCach?: No.")}},5e3);

exports.beaconStartScan=beaconStartScan,
exports.beaconStopScan=beaconStopScan,
exports.getLocationList=getLocationList,









_.extend($,exports);
}

module.exports=Controller;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlbXBsYXRlLmpzIiwiYmVhY29uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLEdBQUEsQ0FBQSxLQUFBLENBQUEsT0FBQSxDQUFBLFFBQUEsQ0FBQTtBQUNBLFFBQUEsQ0FBQSxLQUFBLENBQUEsUUFEQTtBQUVBLENBQUEsQ0FBQSxLQUFBLENBQUEsQ0FGQTs7Ozs7QUFPQSxRQUFBLENBQUEsWUFBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUE7QUFDQSxHQUFBLENBQUEsR0FBQSxDQUFBLElBQUE7Ozs7QUFJQSxNQUhBLENBQUEsR0FHQSxHQUZBLEdBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLEVBQUEsSUFFQSxFQUFBLEdBQUE7QUFDQTs7QUFFQSxRQUFBLENBQUEsVUFBQSxFQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDZ09BLElBQUEsQ0FBQSxLRGhPQSxDQ1JBLFFBQUEsQ0FBQSxnQkFBQSxFQUFBLENBQ0EsRUFBQSxDQUFBLEdBQUEsQ0FBQSxVQUFBLENBQUEsU0FBQSxDQUFBLHNCQUFBLENBQUEsSUFBQSxDQURBLENBRUEsRUFBQSxDQUFBLEdBQUEsQ0FBQSxVQUFBLENBQUEsU0FBQSxDQUFBLHNCQUFBLENBQUEsSUFBQSxDQUZBLENBR0EsRUFBQSxDQUFBLEdBQUEsQ0FBQSxVQUFBLENBQUEsU0FBQSxDQUFBLHFCQUFBLENBQUEsSUFBQSxDQUNBLENBQ0EsUUFBQSxDQUFBLGNBQUEsQ0FBQSxJQUFBLENBQUEsS0FBQSxDQUFBLEtBQUEsQ0FBQSxDQUNBLEVBQUEsQ0FBQSxHQUFBLENBQUEsVUFBQSxDQUFBLFNBQUEsQ0FBQSxzQkFBQSxDQUFBLEtBQUEsQ0FEQSxDQUVBLEVBQUEsQ0FBQSxHQUFBLENBQUEsVUFBQSxDQUFBLFNBQUEsQ0FBQSxzQkFBQSxDQUFBLEtBQUEsQ0FGQSxDQUdBLEVBQUEsQ0FBQSxHQUFBLENBQUEsVUFBQSxDQUFBLFNBQUEsQ0FBQSxxQkFBQSxDQUFBLElBQUEsQ0FDQSxDQUNBLFFBQUEsQ0FBQSxpQkFBQSxDQUFBLElBQUEsQ0FBQSxLQUFBLENBQUEsS0FBQSxDQUFBLE9BRUEsQ0FBQSxJQUFBLEVBQUEsRUFBQSxDQUFBLEdBQUEsQ0FBQSxVQUFBLENBQUEsU0FBQSxDQUFBLHFCQUFBLENBQUEsRUFDQSxLQUFBLEVBQUEsRUFBQSxDQUFBLEdBQUEsQ0FBQSxVQUFBLENBQUEsU0FBQSxDQUFBLHNCQUFBLENBREEsRUFFQSxLQUFBLEVBQUEsRUFBQSxDQUFBLEdBQUEsQ0FBQSxVQUFBLENBQUEsU0FBQSxDQUFBLHNCQUFBLENBS0EsQ0FlQSxRQUFBLENBQUEsa0JBQUEsQ0FBQSxJQUFBLENBQ0EsQ0FDQSxHQUFBLENBQUEsbUJBREEsQ0FFQSxHQUFBLENBQUEsUUFBQSxDQUFBLENBQUEsRUFBQSxDQUZBLFFBVUEsS0FBQSxJQVZBLENBcUJBLENBVUEsUUFBQSxDQUFBLGVBQUEsRUFBQSxDQUVBLEdBREEsZ0JBQUEsRUFDQSxJQXdKQSxDQUdBLEdBQUEsQ0FBQSxXQUFBLENBQUEsQ0FBQSx5Q0FBQSxDQUFBLENBQ0EsRUFBQSxDQUFBLE9BQUEsQ0FBQSxrQkFBQSxDQUFBLFdBQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQSxDQUNBLENBQUEsQ0FBQSxPQURBLENBRUEsT0FBQSxDQUFBLEdBQUEsQ0FBQSx3QkFBQSxDQUZBLENBSUEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxvQkFBQSxDQUVBLENBTkEsQ0FKQSxDQVlBLE9BQUEsQ0FBQSxHQUFBLENBQUEsbUJBQUEsQ0FBQSxXQUFBLElBQUEsQ0FBQSxHQUFBLEVBQUEsQ0FBQSxDQVpBOztBQWNBLHNCQUFBLENBQUEsU0FBQSxDQUFBLENBQUE7QUFDQSxHQUFBLENBQUEsMEJBREE7QUFFQSxPQUFBLENBQUEsR0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBLENBRkE7QUFHQSxDQWpCQTs7QUFtQkEsWUFBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBO0FBQ0EsR0FBQSxDQUFBLEdBQUEsQ0FBQSxnQkFBQTtBQUNBLE9BQUEsQ0FBQSxHQUFBLGtCQUFBLGVBQUEsQ0FBQSxDQUFBLFVBQUEsQ0FBQSxTQUFBLENBRkE7QUFHQSxPQUFBLENBQUEsR0FBQSxrQkFBQSxTQUFBLENBQUEsQ0FBQSxPQUFBLENBQUEsTUFBQSxDQUFBLDBCQUFBLENBSEE7QUFJQSxPQUFBLENBQUEsR0FBQSxrQkFBQSxrQkFBQSxDQUpBO0FBS0EsQ0FBQSxDQUFBLE9BQUEsQ0FBQSxPQUFBLENBQUEsU0FBQSxNQUFBLENBQUEsS0FBQSxDQUFBOzs7QUFHQSxPQUFBLENBQUEsR0FBQSxrQkFBQSxrQkFBQSxLQUFBLENBSEE7QUFJQSxPQUFBLENBQUEsR0FBQSxrQkFBQSxTQUFBLE1BQUEsQ0FBQSxJQUFBLENBSkE7QUFLQSxPQUFBLENBQUEsR0FBQSxrQkFBQSxVQUFBLE1BQUEsQ0FBQSxLQUFBLENBTEE7QUFNQSxPQUFBLENBQUEsR0FBQSxrQkFBQSxVQUFBLE1BQUEsQ0FBQSxLQUFBLENBTkE7QUFPQSxPQUFBLENBQUEsR0FBQSxrQkFBQSxjQUFBLE1BQUEsQ0FBQSxTQUFBLENBUEE7QUFRQSxPQUFBLENBQUEsR0FBQSxrQkFBQSxhQUFBLE1BQUEsQ0FBQSxRQUFBLENBUkE7QUFTQSxPQUFBLENBQUEsR0FBQSxrQkFBQSxTQUFBLE1BQUEsQ0FBQSxJQUFBLENBVEE7QUFVQSxPQUFBLENBQUEsR0FBQSxrQkFBQSxVQUFBLE1BQUEsQ0FBQSxLQUFBLENBVkE7QUFXQSxPQUFBLENBQUEsR0FBQSxDQUFBLGtCQUFBLENBWEE7O0FBYUEsR0FBQSxDQUFBLFVBQUEsQ0FB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QSxFQURBOzs7Ozs7OztBQVNBLEdBQUEsQ0FBQSx3QkFBQSxFQVRBO0FBVUEsR0FBQSxDQUFBLG1CQUFBLENBQUEsY0FBQSxDQUFBLFlBQUEsQ0FWQSxHQUdBLE9BQUEsQ0FBQSxtQkFBQSxDQUNBLHdCQURBLENBRUEseUJBRkEsQ0FIQSxDQU9BLE9BQUEsQ0FBQSxtQkFBQSxDQUFBLGlCQUFBLENBQUEsa0JBQUEsQ0FQQTs7QUFZQTs7QUFFQSxRQUFBLENBQUEsV0FBQSxDQUFBLFVBQUEsQ0FBQSxVQUFBLENBQUEsUUFBQSxDQUFBO0FBQ0EsR0FBQSxDQUFBLGVBREE7QUFFQSxHQUFBLENBQUEsRUFBQSxDQUFBLE9BQUEsQ0FBQSxnQkFBQSxFQUZBOztBQUlBLFdBQUEsQ0FBQSxRQUFBLENBQUEsa0JBQUEsVUFBQSxJQUFBLFVBQUEsRUFBQSxDQUpBO0FBS0EsT0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsV0FBQSxDQUFBLFdBQUEsQ0FBQSxTQUFBLENBQUEsVUFBQSxDQUFBLFNBQUEsQ0FBQSxVQUFBLENBTEE7O0FBT0EsR0FBQSxDQUFBLE1BQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQTtBQUNBLEdBQUEsQ0FBQSxRQUFBLENBQUEsRUFBQTtBQUNBLE9BQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLEtBQUEsTUFBQSxDQUZBO0FBR0EsT0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsS0FBQSxZQUFBLENBSEE7O0FBS0EsUUFBQSxDQUFBLElBQUEsQ0FBQSxLQUFBLENBQUEsS0FBQSxZQUFBLENBTEE7QUFNQSxjQUFBLENBQUEsUUFBQSxDQUFBLGdCQU5BO0FBT0EsT0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsV0FBQSxDQUFBLFFBQUEsQ0FQQTs7O0FBVUEsY0FBQSxDQUFBLFFBQUEsQ0FBQSxTQVZBLENBUUEsYUFBQSxDQUFBLFFBUkEsQ0FVQSxRQUFBLFVBVkE7Ozs7QUFjQSxHQWRBOztBQWdCQSxpQkFBQSxDQUFBLFFBaEJBOztBQWtCQSxjQUFBLENBQUEsUUFBQSxDQUFB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T0FBQSxDQXZDQTtBQXdDQTs7QUFFQSxNQUFBLENBQUEsT0FBQSxDQUFBLFUiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgQWxsb3kgPSByZXF1aXJlKCcvYWxsb3knKSxcblx0QmFja2JvbmUgPSBBbGxveS5CYWNrYm9uZSxcblx0XyA9IEFsbG95Ll87XG5cblxuXG5cbmZ1bmN0aW9uIF9fcHJvY2Vzc0FyZyhvYmosIGtleSkge1xuXHR2YXIgYXJnID0gbnVsbDtcblx0aWYgKG9iaikge1xuXHRcdGFyZyA9IG9ialtrZXldIHx8IG51bGw7XG5cdH1cblx0cmV0dXJuIGFyZztcbn1cblxuZnVuY3Rpb24gQ29udHJvbGxlcigpIHtcblx0XG5cdHJlcXVpcmUoJy9hbGxveS9jb250cm9sbGVycy8nICsgJ0Jhc2VDb250cm9sbGVyJykuYXBwbHkodGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSk7XG5cdHRoaXMuX19jb250cm9sbGVyUGF0aCA9ICdpbmV0X2JlYWNvbi9iZWFjb24nO1xuXHR0aGlzLmFyZ3MgPSBhcmd1bWVudHNbMF0gfHwge307XG5cblx0aWYgKGFyZ3VtZW50c1swXSkge1xuXHRcdHZhciBfX3BhcmVudFN5bWJvbCA9IF9fcHJvY2Vzc0FyZyhhcmd1bWVudHNbMF0sICdfX3BhcmVudFN5bWJvbCcpO1xuXHRcdHZhciAkbW9kZWwgPSBfX3Byb2Nlc3NBcmcoYXJndW1lbnRzWzBdLCAnJG1vZGVsJyk7XG5cdFx0dmFyIF9faXRlbVRlbXBsYXRlID0gX19wcm9jZXNzQXJnKGFyZ3VtZW50c1swXSwgJ19faXRlbVRlbXBsYXRlJyk7XG5cdH1cblx0dmFyICQgPSB0aGlzO1xuXHR2YXIgZXhwb3J0cyA9IHt9O1xuXHR2YXIgX19kZWZlcnMgPSB7fTtcblxuXHQvLyBHZW5lcmF0ZWQgY29kZSB0aGF0IG11c3QgYmUgZXhlY3V0ZWQgYmVmb3JlIGFsbCBVSSBhbmQvb3Jcblx0Ly8gY29udHJvbGxlciBjb2RlLiBPbmUgZXhhbXBsZSBpcyBhbGwgbW9kZWwgYW5kIGNvbGxlY3Rpb25cblx0Ly8gZGVjbGFyYXRpb25zIGZyb20gbWFya3VwLlxuXHRcblxuXHQvLyBHZW5lcmF0ZWQgVUkgY29kZVxuXHRleHBvcnRzLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7fTtcblxuXHQvLyBtYWtlIGFsbCBJRGVkIGVsZW1lbnRzIGluICQuX192aWV3cyBhdmFpbGFibGUgcmlnaHQgb24gdGhlICQgaW4gYVxuXHQvLyBjb250cm9sbGVyJ3MgaW50ZXJuYWwgY29kZS4gRXh0ZXJuYWxseSB0aGUgSURlZCBlbGVtZW50cyB3aWxsXG5cdC8vIGJlIGFjY2Vzc2VkIHdpdGggZ2V0VmlldygpLlxuXHRfLmV4dGVuZCgkLCAkLl9fdmlld3MpO1xuXG5cdC8vIENvbnRyb2xsZXIgY29kZSBkaXJlY3RseSBmcm9tIHRoZSBkZXZlbG9wZXIncyBjb250cm9sbGVyIGZpbGVcblx0X19NQVBNQVJLRVJfQ09OVFJPTExFUl9DT0RFX19cblxuXHQvLyBHZW5lcmF0ZWQgY29kZSB0aGF0IG11c3QgYmUgZXhlY3V0ZWQgYWZ0ZXIgYWxsIFVJIGFuZFxuXHQvLyBjb250cm9sbGVyIGNvZGUuIE9uZSBleGFtcGxlIGRlZmVycmVkIGV2ZW50IGhhbmRsZXJzIHdob3NlXG5cdC8vIGZ1bmN0aW9ucyBhcmUgbm90IGRlZmluZWQgdW50aWwgYWZ0ZXIgdGhlIGNvbnRyb2xsZXIgY29kZVxuXHQvLyBpcyBleGVjdXRlZC5cblx0XG5cblx0Ly8gRXh0ZW5kIHRoZSAkIGluc3RhbmNlIHdpdGggYWxsIGZ1bmN0aW9ucyBhbmQgcHJvcGVydGllc1xuXHQvLyBkZWZpbmVkIG9uIHRoZSBleHBvcnRzIG9iamVjdC5cblx0Xy5leHRlbmQoJCwgZXhwb3J0cyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQ29udHJvbGxlcjtcbiIsIi8vIGxldCBiZWFjb25VVUlEID0gXCJjOGE5NGY0Mi0zY2Q1LTQ4M2EtOGFkYy05NzQ3MzE5N2I4YjRcIjtcbmxldCBiZWFjb25VVUlEID0gXCI1OTkxZTE2MS1iYjQ2LTQzMmYtOWJkOC1iMjcxZjc2ZjY3ZDlcIjtcbmxldCBiZWFjb25JZGVudGlmaWVyID0gXCJNb3Jwcm9tXCI7XG5sZXQgZ2xvYmFsX2JlYWNvbnMgPSB7fTtcblxuVGkuQXBwLlByb3BlcnRpZXMuc2V0U3RyaW5nKFwiZl9iZWFjb25cIiwgXCJcIik7XG5cbmZ1bmN0aW9uIHJlc2V0U3RhdGVCZWFjb24oKSB7XG4gIFRpLkFwcC5Qcm9wZXJ0aWVzLnNldFN0cmluZyhcImluZXRCZWFjb25EYXRhX21ham9yXCIsIG51bGwpO1xuICBUaS5BcHAuUHJvcGVydGllcy5zZXRTdHJpbmcoXCJpbmV0QmVhY29uRGF0YV9taW5vclwiLCBudWxsKTtcbiAgVGkuQXBwLlByb3BlcnRpZXMuc2V0U3RyaW5nKFwiaW5ldEJlYWNvbkRhdGFfdXVpZFwiLCBudWxsKTtcbn1cbmZ1bmN0aW9uIHNldFN0YXRlQmVhY29uKHV1aWQsIG1pbm9yLCBtYWpvcikge1xuICBUaS5BcHAuUHJvcGVydGllcy5zZXRTdHJpbmcoXCJpbmV0QmVhY29uRGF0YV9tYWpvclwiLCBtYWpvcik7XG4gIFRpLkFwcC5Qcm9wZXJ0aWVzLnNldFN0cmluZyhcImluZXRCZWFjb25EYXRhX21pbm9yXCIsIG1pbm9yKTtcbiAgVGkuQXBwLlByb3BlcnRpZXMuc2V0U3RyaW5nKFwiaW5ldEJlYWNvbkRhdGFfdXVpZFwiLCB1dWlkKTtcbn1cbmZ1bmN0aW9uIGlzU2FtZVN0YXRlQmVmb3JlKHV1aWQsIG1pbm9yLCBtYWpvcikge1xuICBpZiAoXG4gIHV1aWQgPT0gVGkuQXBwLlByb3BlcnRpZXMuZ2V0U3RyaW5nKFwiaW5ldEJlYWNvbkRhdGFfdXVpZFwiKSAmJlxuICBtYWpvciA9PSBUaS5BcHAuUHJvcGVydGllcy5nZXRTdHJpbmcoXCJpbmV0QmVhY29uRGF0YV9tYWpvclwiKSAmJlxuICBtaW5vciA9PSBUaS5BcHAuUHJvcGVydGllcy5nZXRTdHJpbmcoXCJpbmV0QmVhY29uRGF0YV9taW5vclwiKSlcbiAge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuY29uc29sZS5sb2coXCJiZWdpbjpcIiwgTWF0aC5mbG9vcihEYXRlLm5vdygpKSk7XG52YXIgQkxFID0gbnVsbDtcbi8vIHZhciBhbmRyb2lkUGxhdGZvcm1Ub29scyA9IHJlcXVpcmUoJ2JlbmNvZGluZy5hbmRyb2lkLnRvb2xzJykuY3JlYXRlUGxhdGZvcm0oKTtcbnZhciBpc0ZvcmVncm91bmQgPSB0cnVlO1xuXG5pZiAoT1NfSU9TKVxue1xuICBCTEUgPSByZXF1aXJlKFwiYXBwY2VsZXJhdG9yLmJsZVwiKTtcbn0gZWxzZVxue1xuICBCTEUgPSByZXF1aXJlKFwiY29tLmxpZmVyYXkuYmVhY29uc1wiKTtcbn1cblxuZnVuY3Rpb24gaXNJbnRlcmVzdGVkUmVnaW9uKHJzc2kpXG57XG4gIHRhZyA9IFwiaXNJbnRlcmVzdFJlZ2lvbjpcIjtcbiAgbGV0IG1pbl9yc3NpID0gLTk2O1xuICBpZiAoT1NfSU9TKVxuICB7XG4gICAgLy8gaW50ZXJlc3RlZCBhbGxcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlXG5cbiAge1xuICAgIGlmIChyc3NpIDw9IG1pbl9yc3NpKVxuICAgIHtcbiAgICAgIC8vIG5vdCBpbnRlcmVzdGVkIHJlZ2lvblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZVxuXG4gICAge1xuICAgICAgLy8gaW50ZXJlc3RlZCByZWdpb25cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxufVxuXG5jb25zb2xlLmxvZyhcImFmdGVyIGxvZGUgbGliOlwiLCBNYXRoLmZsb29yKERhdGUubm93KCkpKTtcbi8vIC0tLSBpb3MgLS0tLS0tLS0tLVxudmFyIG1hbmFnZXIgPSBudWxsO1xudmFyIGlvc0RpZFJhbmdlQmVhY29ucyA9IG51bGw7XG52YXIgaW9zRGlkQ2hhbmdlQXV0aG9yaXphdGlvbiA9IG51bGw7XG4vLyAtLS0gYW5kcm9pZCAtLS0tLS0tLS0tXG52YXIgaW5CZWNvblJhbmdlID0gbnVsbDtcblxuZnVuY3Rpb24gYmVhY29uU3RhcnRTY2FuKCkge1xuICByZXNldFN0YXRlQmVhY29uKCk7XG4gIGlmIChPU19JT1MpIHtcbiAgICAvLyAtLS0tLS0tLSBJT1MgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBpb3NEaWRDaGFuZ2VBdXRob3JpemF0aW9uID0gKGUpID0+IHtcbiAgICAgIFRpLkFQSS5pbmZvKFwiZGlkQ2hhbmdlQXV0aG9yaXphdGlvblwiKTtcbiAgICAgIHN3aXRjaCAoZS5zdGF0ZSkge1xuICAgICAgICBjYXNlIEJMRS5MT0NBVElPTl9NQU5BR0VSX0FVVEhPUklaQVRJT05fU1RBVFVTX0FVVEhPUklaRURfQUxXQVlTOlxuICAgICAgICAgIGFsZXJ0KFwiTWFuYWdlciBhdXRob3JpemF0aW9uIGlzIGFsd2F5c1wiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBCTEUuTE9DQVRJT05fTUFOQUdFUl9BVVRIT1JJWkFUSU9OX1NUQVRVU19BVVRIT1JJWkVEX1dIRU5fSU5fVVNFOlxuICAgICAgICAgIGFsZXJ0KFwiTWFuYWdlciBhdXRob3JpemF0aW9uIGlzIHdoZW4gaW4gdXNlXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEJMRS5MT0NBVElPTl9NQU5BR0VSX0FVVEhPUklaQVRJT05fU1RBVFVTX0RFTklFRDpcbiAgICAgICAgICBhbGVydChcIk1hbmFnZXIgYXV0aG9yaXphdGlvbiBpcyBkZW5pZWRcIik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQkxFLkxPQ0FUSU9OX01BTkFHRVJfQVVUSE9SSVpBVElPTl9TVEFUVVNfTk9UX0RFVEVSTUlORUQ6XG4gICAgICAgICAgYWxlcnQoXCJNYW5hZ2VyIGF1dGhvcml6YXRpb24gaXMgbm90IGRldGVybWluZWRcIik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQkxFLkxPQ0FUSU9OX01BTkFHRVJfQVVUSE9SSVpBVElPTl9TVEFUVVNfUkVTVFJJQ1RFRDpcbiAgICAgICAgICBhbGVydChcIk1hbmFnZXIgYXV0aG9yaXphdGlvbiBpcyBwb3dlcmVkIHJlc3RyaWN0ZWRcIik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYWxlcnQoXCJVbmtub3duXCIpO1xuICAgICAgICAgIGJyZWFrO31cblxuICAgIH07XG5cbiAgICBpb3NEaWRSYW5nZUJlYWNvbnMgPSAoZSkgPT4ge1xuICAgICAgVGkuQVBJLmluZm8oXCJkaWRSYW5nZUJlYWNvbnNcIik7XG4gICAgICB2YXIgYmVjYW9ucyA9IGUuYmVhY29ucztcblxuXG4gICAgICBpZiAoYmVjYW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJObyBiZWFjb24gaW4gcmFuZ2VcIik7XG4gICAgICAgIGlmIChUaS5BcHAuUHJvcGVydGllcy5nZXRTdHJpbmcoXCJpbmV0QmVhY29uRGF0YV91dWlkXCIpICE9PSBudWxsKSB7XG4gICAgICAgICAgYWxlcnQoXG4gICAgICAgICAgXCJFeGl0IHV1aWQ6IFwiICtcbiAgICAgICAgICBUaS5BcHAuUHJvcGVydGllcy5nZXRTdHJpbmcoXCJpbmV0QmVhY29uRGF0YV91dWlkXCIpICtcbiAgICAgICAgICBcIiAgTWFqb3I6IFwiICtcbiAgICAgICAgICBUaS5BcHAuUHJvcGVydGllcy5nZXRTdHJpbmcoXCJpbmV0QmVhY29uRGF0YV9tYWpvclwiKSArXG4gICAgICAgICAgXCIgIE1pbm9yOiBcIiArXG4gICAgICAgICAgVGkuQXBwLlByb3BlcnRpZXMuZ2V0U3RyaW5nKFwiaW5ldEJlYWNvbkRhdGFfbWlub3JcIikpO1xuXG4gICAgICAgICAgcmVzZXRTdGF0ZUJlYWNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHByb3hpbWl0eSA9IGJlY2FvbnNbMF0ucHJveGltaXR5O1xuICAgICAgdmFyIGFjY3VyYWN5ID0gYmVjYW9uc1swXS5hY2N1cmFjeTtcbiAgICAgIHZhciBtYWpvciA9IGJlY2FvbnNbMF0ubWFqb3I7XG4gICAgICB2YXIgbWlub3IgPSBiZWNhb25zWzBdLm1pbm9yO1xuICAgICAgdmFyIGhhdmVDYXNlID0gdHJ1ZTtcblxuICAgICAgLy8gY2hlY2sgc3RhdGUgYmVmb3JlXG5cbiAgICAgIGlmICghaXNJbnRlcmVzdGVkUmVnaW9uKHByb3hpbWl0eSkpXG4gICAgICB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiVG9vIGZhci4uLlwiKTtcbiAgICAgIH1cbiAgICAgIGlmIChpc1NhbWVTdGF0ZUJlZm9yZShlLnJlZ2lvbi51dWlkLCBtYWpvciwgbWlub3IpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc3dpdGNoIChwcm94aW1pdHkpIHtcbiAgICAgICAgY2FzZSBCTEUuQkVBQ09OX1BST1hJTUlUWV9VTktOT1dOOlxuICAgICAgICAgIGFsZXJ0KFwiQmVhY29uIExvY2F0aW9uIDogVU5LTk9XTlwiKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIEJMRS5CRUFDT05fUFJPWElNSVRZX0lNTUVESUFURTpcbiAgICAgICAgICAvLyBzZXQgYmVhY29uIHN0YXRlIG9ubHksIGJ1dCBub3QgdXNlIHByb3hpbWl0eVxuICAgICAgICAgIHNldFN0YXRlQmVhY29uKGUucmVnaW9uLnV1aWQsIG1ham9yLCBtaW5vcik7XG4gICAgICAgICAgY29uc29sZS5sb2coZS5yZWdpb24udXVpZCArIFwiIE1ham9yOiBcIiArIG1ham9yICsgXCIgTWlub3I6IFwiICsgbWlub3IpO1xuICAgICAgICAgIGFsZXJ0KFxuICAgICAgICAgIFwiSU1NRURJQVRFIHV1aWQ6IFwiICtcbiAgICAgICAgICBlLnJlZ2lvbi51dWlkICtcbiAgICAgICAgICBcIiAgTWFqb3I6IFwiICtcbiAgICAgICAgICBtYWpvciArXG4gICAgICAgICAgXCIgIE1pbm9yOiBcIiArXG4gICAgICAgICAgbWlub3IgK1xuICAgICAgICAgIFwiICBBcHByb3g6IFwiICtcbiAgICAgICAgICBhY2N1cmFjeSArXG4gICAgICAgICAgXCJtKVwiKTtcblxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQkxFLkJFQUNPTl9QUk9YSU1JVFlfTkVBUjpcbiAgICAgICAgICBzZXRTdGF0ZUJlYWNvbihlLnJlZ2lvbi51dWlkLCBtYWpvciwgbWlub3IpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGUucmVnaW9uLnV1aWQgKyBcIiBNYWpvcjogXCIgKyBtYWpvciArIFwiIE1pbm9yOiBcIiArIG1pbm9yKTtcbiAgICAgICAgICBhbGVydChcbiAgICAgICAgICBcIk5FQVIgdXVpZDogXCIgK1xuICAgICAgICAgIGUucmVnaW9uLnV1aWQgK1xuICAgICAgICAgIFwiICBNYWpvcjogXCIgK1xuICAgICAgICAgIG1ham9yICtcbiAgICAgICAgICBcIiAgTWlub3I6IFwiICtcbiAgICAgICAgICBtaW5vciArXG4gICAgICAgICAgXCIgIEFwcHJveDogXCIgK1xuICAgICAgICAgIGFjY3VyYWN5ICtcbiAgICAgICAgICBcIm0pXCIpO1xuXG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBCTEUuQkVBQ09OX1BST1hJTUlUWV9GQVI6XG4gICAgICAgICAgc2V0U3RhdGVCZWFjb24oZS5yZWdpb24udXVpZCwgbWFqb3IsIG1pbm9yKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlLnJlZ2lvbi51dWlkICsgXCIgTWFqb3I6IFwiICsgbWFqb3IgKyBcIiBNaW5vcjogXCIgKyBtaW5vcik7XG4gICAgICAgICAgYWxlcnQoXG4gICAgICAgICAgXCJGQVIgdXVpZDogXCIgK1xuICAgICAgICAgIGUucmVnaW9uLnV1aWQgK1xuICAgICAgICAgIFwiICBNYWpvcjogXCIgK1xuICAgICAgICAgIG1ham9yICtcbiAgICAgICAgICBcIiAgTWlub3I6IFwiICtcbiAgICAgICAgICBtaW5vciArXG4gICAgICAgICAgXCIgIEFwcHJveDogXCIgK1xuICAgICAgICAgIGFjY3VyYWN5ICtcbiAgICAgICAgICBcIm0pXCIpO1xuXG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBoYXZlQ2FzZSA9IGZhbHNlO1xuICAgICAgICAgIGFsZXJ0KFwiQmVhY29uIExvY2F0aW9uIDogVU5LTk9XTlwiKTtcbiAgICAgICAgICBicmVhazt9XG5cblxuICAgICAgaWYgKGhhdmVDYXNlKSB7XG4gICAgICAgIC8vIHB1dEFwaShtYWpvciwgbWlub3IpO1xuICAgICAgICAvLyAuLnJlY29yZCBiZWFjb25cbiAgICAgIH1cblxuICAgIH07XG5cbiAgICBpZiAobWFuYWdlciA9PT0gbnVsbCkge1xuICAgICAgbWFuYWdlciA9IEJMRS5jcmVhdGVSZWdpb25NYW5hZ2VyKCk7XG4gICAgICBtYW5hZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImRpZENoYW5nZUF1dGhvcml6YXRpb25cIixcbiAgICAgIGlvc0RpZENoYW5nZUF1dGhvcml6YXRpb24pO1xuXG4gICAgICBtYW5hZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJkaWRSYW5nZUJlYWNvbnNcIiwgaW9zRGlkUmFuZ2VCZWFjb25zKTtcblxuICAgICAgdmFyIGJlYWNvblJlZ2lvbiA9IEJMRS5jcmVhdGVCZWFjb25SZWdpb24oe1xuICAgICAgICB1dWlkOiBiZWFjb25VVUlELFxuICAgICAgICAvLyBtYWpvcjogMzI3NzIsXG4gICAgICAgIC8vIG1pbm9yOiAzLFxuICAgICAgICBpZGVudGlmaWVyOiBiZWFjb25JZGVudGlmaWVyIH0pO1xuXG4gICAgICBtYW5hZ2VyLnN0YXJ0UmVnaW9uTW9uaXRvcmluZyh7XG4gICAgICAgIGJlYWNvblJlZ2lvbjogYmVhY29uUmVnaW9uIH0pO1xuXG4gICAgICBtYW5hZ2VyLnN0YXJ0UmFuZ2luZ0JlYWNvbnNJblJlZ2lvbih7XG4gICAgICAgIGJlYWNvblJlZ2lvbjogYmVhY29uUmVnaW9uIH0pO1xuXG4gICAgfVxuXG4gIH0gZWxzZSB7XG4gICAgLy8gLS0tLS0tLS0gQW5kcm9pZCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIENoZWNrIFBlcm1pc3Npb24gTG9jYXRpb25cbiAgICB2YXIgcGVybWlzc2lvbnMgPSBbXCJhbmRyb2lkLnBlcm1pc3Npb24uQUNDRVNTX0ZJTkVfTE9DQVRJT05cIl07XG4gICAgVGkuQW5kcm9pZC5yZXF1ZXN0UGVybWlzc2lvbnMocGVybWlzc2lvbnMsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoZS5zdWNjZXNzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiYWxsb3cgbG9jYXRpb24gc3VjY2Vzc1wiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibm90IGFsbG93IGxvY2F0aW9uXCIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coXCJhZnRlciBjaGVjayBwZXJtOlwiLCBNYXRoLmZsb29yKERhdGUubm93KCkpKTtcblxuICAgIGFuZHJvaWRCaW5kaW5nQ2FsbGJhY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGFnID0gXCJhbmRyb2lkQmluZGluZ0NhbGxiYWNrOiBcIjtcbiAgICAgIGNvbnNvbGUubG9nKHRhZywgZSk7XG4gICAgfTtcblxuICAgIGluQmVjb25SYW5nZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgdGFnID0gXCJiZWFjb25SYW5nZXM6IFwiO1xuICAgICAgY29uc29sZS5sb2codGFnLCBcIkkgYW0gaW4gdGhlIFwiICsgZS5pZGVudGlmaWVyICsgXCIgcmVnaW9uXCIpO1xuICAgICAgY29uc29sZS5sb2codGFnLCBcIkkgc2VlIFwiICsgZS5iZWFjb25zLmxlbmd0aCArIFwiIGJlYWNvbnMgaW4gdGhpcyByZWdpb246XCIpO1xuICAgICAgY29uc29sZS5sb2codGFnLCBcIi0tLS0tLS0tLS0tLS0tLS1cIik7XG4gICAgICBlLmJlYWNvbnMuZm9yRWFjaChmdW5jdGlvbiAoYmVhY29uLCBpbmRleCkge1xuICAgICAgICAvLyAuLi4gY2hlY2sgcnNzaSBhZGQgdG8gZGlhbG9nXG4gICAgICAgIC8vIGlmIG5vdCBpbnRlcmVzdGVkUmVnaW9uKHJzc2kpIC4uLiBub3QgYWRkIHRvIGNoZWNraW4gZGlhbG9nXG4gICAgICAgIGNvbnNvbGUubG9nKHRhZywgXCJCZWFjb24gbnVtYmVyOiBcIiArIGluZGV4KTtcbiAgICAgICAgY29uc29sZS5sb2codGFnLCBcInV1aWQ6IFwiICsgYmVhY29uLnV1aWQpO1xuICAgICAgICBjb25zb2xlLmxvZyh0YWcsIFwibWFqb3I6IFwiICsgYmVhY29uLm1ham9yKTtcbiAgICAgICAgY29uc29sZS5sb2codGFnLCBcIm1pbm9yOiBcIiArIGJlYWNvbi5taW5vcik7XG4gICAgICAgIGNvbnNvbGUubG9nKHRhZywgXCJwcm94aW1pdHk6IFwiICsgYmVhY29uLnByb3hpbWl0eSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRhZywgXCJhY2N1cmFjeTogXCIgKyBiZWFjb24uYWNjdXJhY3kpO1xuICAgICAgICBjb25zb2xlLmxvZyh0YWcsIFwicnNzaTogXCIgKyBiZWFjb24ucnNzaSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRhZywgXCJwb3dlcjogXCIgKyBiZWFjb24ucG93ZXIpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIi0tLS0tLS0tLS0tLS0tLS1cIik7XG4gICAgICAgIC8vIC4uIGRvIG90aGVycyAuLi4uXG4gICAgICAgIHZhciBiZWFjb25fa2V5ID0gYmVhY29uLm1ham9yICsgXCItXCIgKyBiZWFjb24ubWlub3I7XG4gICAgICAgIGlmIChiZWFjb25fa2V5IGluIGdsb2JhbF9iZWFjb25zKVxuICAgICAgICB7XG4gICAgICAgICAgY29uc29sZS5sb2coYmVhY29uX2tleSArIFwiIGJlYWNvbiB3YXMgcmVjb3JkZWRcIik7XG4gICAgICAgIH0gZWxzZVxuXG4gICAgICAgIHtcbiAgICAgICAgICBpZiAoaXNJbnRlcmVzdGVkUmVnaW9uKGJlYWNvbi5yc3NpKSlcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0YWcsIFwiY2FsbCBsb2NhdGlvbiBhcGlcIik7XG4gICAgICAgICAgICBnbG9iYWxfYmVhY29uc1tiZWFjb25fa2V5XSA9IHtcbiAgICAgICAgICAgICAgXCJtYWpvclwiOiBiZWFjb24ubWFqb3IsXG4gICAgICAgICAgICAgIFwibWlub3JcIjogYmVhY29uLm1pbm9yLFxuICAgICAgICAgICAgICBcInJzc2lcIjogYmVhY29uLnJzc2ksXG4gICAgICAgICAgICAgIFwibG9jYXRpb25cIjogXCLguIHguLPguKXguLHguIfguITguYnguJnguKvguLLguJXguLPguYHguKvguJnguYjguIdcIixcbiAgICAgICAgICAgICAgXCJpc1JlZ2lzdGVyZWRcIjogZmFsc2UsXG4gICAgICAgICAgICAgIFwidHNcIjogbmV3IERhdGUoKS5nZXRUaW1lKCkgfTtcblxuICAgICAgICAgICAgLy8gY2FsbCBsb2NhdGlvb24gYXBpXG4gICAgICAgICAgICBnZXRMb2NhdGlvbihiZWFjb24ubWFqb3IsIGJlYWNvbi5taW5vciwgYmVhY29uX2tleSk7XG4gICAgICAgICAgfSBlbHNlXG5cbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5vdCBpbnRlcmVzZWQgcmVnaW9uLlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBCTEUuYWRkRXZlbnRMaXN0ZW5lcihcImJlYWNvblJhbmdlc1wiLCBpbkJlY29uUmFuZ2UpO1xuXG4gICAgdmFyIHJlZ2lvblN0YXRlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciB0YWcgPSBcInJlZ2lvblN0YXRlOiBcIjtcbiAgICAgIGNvbnNvbGUubG9nKHRhZywgXCJpZGVudGlmZXI6IFwiICsgZS5yZWdpb25TdGF0ZSk7XG4gICAgfTtcblxuICAgIEJMRS5hZGRFdmVudExpc3RlbmVyKFwib25JQmVhY29uU2VydmljZUNvbm5lY3RcIiwgYW5kcm9pZEJpbmRpbmdDYWxsYmFjayk7XG5cbiAgICBjb25zb2xlLmxvZyhcImFkZCBldm50IGNvbXBsZXRlOlwiLCBNYXRoLmZsb29yKERhdGUubm93KCkpKTtcblxuICAgIHZhciB3aGVuX3JlYWR5O1xuICAgIHZhciBub3RfcmVhZHlfY291bnQgPSAwO1xuXG4gICAgQkxFLmJpbmRCZWFjb25TZXJ2aWNlKCk7XG5cbiAgICB3aGVuX3JlYWR5ID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCFCTEUuaXNSZWFkeSgpKVxuICAgICAge1xuICAgICAgICBjb25zb2xlLmxvZyhcIm5vdF9yZWFkeV9jb3VudD1cIiwgbm90X3JlYWR5X2NvdW50KTtcbiAgICAgICAgY29uc29sZS5sb2coXCJCTEUgTm90IHJlYWR5XCIpO1xuICAgICAgICBub3RfcmVhZHlfY291bnQrKztcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBUaS5BUEkuaW5mbyhcIlRyeVwiLCBub3RfcmVhZHlfY291bnQsIFwidGltZSwgXCIsIFwiT2theSEgTW9kdWxlIGlzIHJlYWR5IVwiKTtcblxuICAgICAgLy8gY29uc29sZS5sb2coXCJjaGVja0F2YWlsYWJpbGl0eT1cIiwgQkxFLmNoZWNrQXZhaWxhYmlsaXR5KCkpO1xuICAgICAgaWYgKCFCTEUuY2hlY2tBdmFpbGFiaWxpdHkoKSlcbiAgICAgIHtcbiAgICAgICAgYWxlcnQoXCJJdCdzIG5vdCBzdXBwb3J0IGluIHlvdXIgZGV2aWNlIVwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBCTEUuc2V0QmFja2dyb3VuZE1vZGUoZmFsc2UpO1xuICAgICAgQkxFLnNldFNjYW5QZXJpb2RzKHtcbiAgICAgICAgZm9yZWdyb3VuZFNjYW5QZXJpb2Q6IDUwMDAsXG4gICAgICAgIGZvcmVncm91bmRCZXR3ZWVuU2NhblBlcmlvZDogMjAwLFxuICAgICAgICBiYWNrZ3JvdW5kU2NhblBlcmlvZDogNTAwMCxcbiAgICAgICAgYmFja2dyb3VuZEJldHdlZW5TY2FuUGVyaW9kOiAyMDAgfSk7XG5cblxuICAgICAgQkxFLnN0YXJ0TW9uaXRvcmluZ0ZvclJlZ2lvbih7XG4gICAgICAgIGlkZW50aWZpZXI6IGJlYWNvbklkZW50aWZpZXIsXG4gICAgICAgIHV1aWQ6IGJlYWNvblVVSUQgfSk7XG5cblxuICAgICAgY2xlYXJJbnRlcnZhbCh3aGVuX3JlYWR5KTtcbiAgICAgIHdoZW5fcmVhZHkgPSBudWxsO1xuICAgIH0sIDEwMDApO1xuXG4gICAgdmFyIG1vbml0O1xuXG4gICAgbW9uaXQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAvLyB2YXIgaXNGb3JlZ3JvdW5kID0gYW5kcm9pZFBsYXRmb3JtVG9vbHMuaXNJbkZvcmVncm91bmQoKTtcbiAgICAgIGlmICghaXNGb3JlZ3JvdW5kKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQXBwIGluIGJhY2tncm91bmQuIFN0b3Agc2Nhbi5cIik7XG4gICAgICAgIEJMRS5zdG9wU2NhbigpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8gZW5kIGFuZHJvaWRcbiAgfVxufVxuXG52YXIgY2xlYXJCQ0NhY2hlID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICB2YXIgdGFnID0gXCJ0aW1lVG9DbGVhckJDQ2FjaD86IFwiO1xuICBmb3IgKHZhciBwcm9wIGluIGdsb2JhbF9iZWFjb25zKSB7XG4gICAgdmFyIGRUcyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gZ2xvYmFsX2JlYWNvbnNbcHJvcF1bXCJ0c1wiXTtcbiAgICBjb25zb2xlLmxvZyh0YWcgKyBnbG9iYWxfYmVhY29uc1twcm9wXVtcImxvY2F0aW9uXCJdICsgXCIgZFRzPVwiICsgZ2xvYmFsX2JlYWNvbnNbcHJvcF1bXCJ0c1wiXSArIFwiIG1zXCIpO1xuICAgIGlmIChkVHMgPiA1ICogNjAgKiAxMDAwKVxuICAgIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiWWVzLCBjbGVhciBiZWFjb24gY2FjaGUuXCIpO1xuICAgICAgZGVsZXRlIGdsb2JhbF9iZWFjb25zW3Byb3BdO1xuICAgIH0gZWxzZVxuXG4gICAge1xuICAgICAgY29uc29sZS5sb2codGFnICsgXCJOby5cIik7XG4gICAgfVxuICB9XG59LCA1MDAwKTtcblxuZnVuY3Rpb24gYmVhY29uU3RvcFNjYW4oKSB7XG4gIHJlc2V0U3RhdGVCZWFjb24oKTtcbiAgaWYgKE9TX0lPUykge1xuICAgIG1hbmFnZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICBcImRpZENoYW5nZUF1dGhvcml6YXRpb25cIixcbiAgICBpb3NEaWRDaGFuZ2VBdXRob3JpemF0aW9uKTtcblxuICAgIG1hbmFnZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRpZFJhbmdlQmVhY29uc1wiLCBpb3NEaWRSYW5nZUJlYWNvbnMpO1xuICB9IGVsc2Uge1xuICAgIEJMRS5zdG9wTW9uaXRvcmluZ0FsbFJlZ2lvbnMoKTtcbiAgICBCTEUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJlYWNvblJhbmdlc1wiLCBpbkJlY29uUmFuZ2UpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldExvY2F0aW9uKHRoaXNfbWFqb3IsIHRoaXNfbWlub3IsIHRoaXNfa2V5KSB7XG4gIHRhZyA9IFwiZ2V0TG9jYXRpb246IFwiO1xuICB2YXIgeGhyID0gVGkuTmV0d29yay5jcmVhdGVIVFRQQ2xpZW50KCk7XG4gIC8vIGhhc2hfdmFsdWVcbiAgdmFyIG15X2xvY19jb2RlID0gbWQ1X2hhc2goYGIxY2Y0YjdlYzIwMzoxOiR7dGhpc19tYWpvcn06JHt0aGlzX21pbm9yfWApO1xuICBjb25zb2xlLmxvZyh0YWcgKyBcIm15X2hhc2g6IFwiICsgbXlfbG9jX2NvZGUgKyBcIiBtYWpvcjpcIiArIHRoaXNfbWFqb3IgKyBcIiBtaW5vcjpcIiArIHRoaXNfbWlub3IpO1xuXG4gIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkge1xuICAgIHZhciByZXNfanNvbiA9IHt9O1xuICAgIGNvbnNvbGUubG9nKHRhZywgdGhpcy5zdGF0dXMpO1xuICAgIGNvbnNvbGUubG9nKHRhZywgdGhpcy5yZXNwb25zZVRleHQpO1xuICAgIC8vIGFsZXJ0KHRhZyArIHRoaXMucmVzcG9uc2VUZXh0KTtcbiAgICByZXNfanNvbiA9IEpTT04ucGFyc2UodGhpcy5yZXNwb25zZVRleHQpO1xuICAgIGdsb2JhbF9iZWFjb25zW3RoaXNfa2V5XVtcImlzUmVnaXN0ZXJlZFwiXSA9IHRydWU7XG4gICAgY29uc29sZS5sb2codGFnLCBcInJlc19qc29uPVwiLCByZXNfanNvbik7XG4gICAgaWYgKFwic2l0ZV9uYW1lXCIgaW4gcmVzX2pzb24pXG4gICAge1xuICAgICAgZ2xvYmFsX2JlYWNvbnNbdGhpc19rZXldW1wibG9jYXRpb25cIl0gPSByZXNfanNvbltcInNpdGVfbmFtZVwiXTtcbiAgICB9IGVsc2VcblxuICAgIHtcbiAgICAgIGdsb2JhbF9iZWFjb25zW3RoaXNfa2V5XVtcImxvY2F0aW9uXCJdID0gXCItXCI7XG4gICAgfVxuICAgIGlmIChcImxvY2F0aW9uX25hbWVcIiBpbiByZXNfanNvbilcbiAgICB7XG4gICAgICBnbG9iYWxfYmVhY29uc1t0aGlzX2tleV1bXCJsb2NhdGlvblwiXSA9IGdsb2JhbF9iZWFjb25zW3RoaXNfa2V5XVtcImxvY2F0aW9uXCJdICsgXCIgXCIgKyByZXNfanNvbltcImxvY2F0aW9uX25hbWVcIl07XG4gICAgfVxuICAgIGFsZXJ0KHRhZyArIHRoaXNfa2V5ICsgXCI6XCIgKyBnbG9iYWxfYmVhY29uc1t0aGlzX2tleV1bXCJsb2NhdGlvblwiXSk7XG4gIH07XG5cbiAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgIGNvbnNvbGUubG9nKHRhZywgdGhpcy5zdGF0dXMpO1xuICAgIGNvbnNvbGUubG9nKHRhZywgdGhpcy5yZXNwb25zZVRleHQpO1xuICAgIGlmICh0aGlzLnN0YXR1cyA9IDQwNClcbiAgICB7XG4gICAgICBnbG9iYWxfYmVhY29uc1t0aGlzX2tleV1bXCJsb2NhdGlvblwiXSA9IGDguYTguKHguYjguJ7guJrguJXguLPguYHguKvguJnguYjguIcgJHtnbG9iYWxfYmVhY29uc1t0aGlzX2tleV1bXCJtYWpvclwiXX0vJHtnbG9iYWxfYmVhY29uc1t0aGlzX2tleV1bXCJtYWpvclwiXX0g4LmD4LiZ4Lij4Liw4Lia4LiaYDtcbiAgICB9IGVsc2VcblxuICAgIHtcbiAgICAgIGdsb2JhbF9iZWFjb25zW3RoaXNfa2V5XVtcImxvY2F0aW9uXCJdID0gXCLguIHguKPguLjguJPguLLguKXguK3guIfguYPguKvguKHguYhcIjtcbiAgICB9XG4gIH07XG4gIHhoci50aW1lb3V0ID0gMTAwMDA7XG4gIHhoci5vcGVuKCdHRVQnLCAnaHR0cHM6Ly9iZWFjb24tdHJhY2suaW5ldC5jby50aC9iZWFjb25pbmZvP2NvZGU9JyArIG15X2xvY19jb2RlKTtcbiAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJjb250ZW50LXR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICB4aHIuc2VuZCgpO1xufVxuXG5mdW5jdGlvbiBzb3J0QnlQcm9wZXJ0eShwcm9wZXJ0eSkge1xuICB2YXIgdGFnID0gXCJzb3J0QnlQcm9wOiBcIjtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgaWYgKGFbcHJvcGVydHldID4gYltwcm9wZXJ0eV0pXG4gICAge1xuICAgICAgLy8gYWxlcnQoYVtcImxvY2F0aW9uXCJdICsgXCIgXCIgKyBhW3Byb3BlcnR5XSArIFwiPlwiICsgYltcImxvY2F0aW9uXCJdICsgXCIgXCIgKyBiW3Byb3BlcnR5XSk7XG4gICAgICBjb25zb2xlLmxvZyhhW1wibG9jYXRpb25cIl0gKyBcIiBcIiArIGFbcHJvcGVydHldICsgXCI+XCIgKyBiW1wibG9jYXRpb25cIl0gKyBcIiBcIiArIGJbcHJvcGVydHldKTtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9IGVsc2VcbiAgICBpZiAoYVtwcm9wZXJ0eV0gPCBiW3Byb3BlcnR5XSlcbiAgICB7XG4gICAgICAvLyBhbGVydChhW1wibG9jYXRpb25cIl0gKyBcIiBcIiArIGFbcHJvcGVydHldICsgXCI8XCIgKyBiW1wibG9jYXRpb25cIl0gKyBcIiBcIiArIGJbcHJvcGVydHldKTtcbiAgICAgIGNvbnNvbGUubG9nKGFbXCJsb2NhdGlvblwiXSArIFwiIFwiICsgYVtwcm9wZXJ0eV0gKyBcIjxcIiArIGJbXCJsb2NhdGlvblwiXSArIFwiIFwiICsgYltwcm9wZXJ0eV0pO1xuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRMb2NhdGlvbkxpc3QoKVxue1xuICB2YXIgdGFnID0gXCJnZXRMb2NhdGlvbkxpc3Q6IFwiO1xuICB2YXIgZ2xvYmFsX2xvY2F0aW9uID0gW107XG4gIHZhciBsb2NhdGlvbl9saXN0ID0gXCJcIjtcbiAgLy8gY3JlYXRlIGFyciBvZiBqc29uIG9mIGxvY2F0aW9ucywgZmlsdGVyIG9ubHkgcmVnaXN0ZXJlZCBkZXZpY2VcblxuICBmb3IgKHZhciBwcm9wIGluIGdsb2JhbF9iZWFjb25zKSB7XG4gICAgY29uc29sZS5sb2codGFnLCBcImJlYWNvbiBcIiwgZ2xvYmFsX2JlYWNvbnNbcHJvcF0pO1xuICAgIC8vIGJyaW5uZyByZWdpc3RlcmVkIHJlZ2lvbiBmaXJzdCFcbiAgICBpZiAoZ2xvYmFsX2JlYWNvbnNbcHJvcF1bXCJpc1JlZ2lzdGVyZWRcIl0pXG4gICAge1xuICAgICAgLy8gYWRkIHRvIGxvY2F0aW9uIGxpc3RcbiAgICAgIGdsb2JhbF9sb2NhdGlvbi5wdXNoKGdsb2JhbF9iZWFjb25zW3Byb3BdKTtcbiAgICB9XG4gIH1cblxuICAvLyBjaGVjayBudW1iZXIgb2YgbG9jYXRpb24gaXMgbGVzcyB0aGFuIDBcblxuICAvKlxyXG4gIHZhciBtYXhfbG9jYXRpb24gPSAzO1xyXG4gIGlmKChnbG9iYWxfYmVhY29ucy5sZW5ndGggPiBnbG9iYWxfbG9jYXRpb24ubGVuZ3RoKSAmJiAoZ2xvYmFsX2xvY2F0aW9uIDwgbWF4X2xvY2F0aW9uKSkgXHJcbiAge1xyXG4gICAgLy8gYWRkIG5vbiByZWdpc3RlcmVkIGJlYWNvbiBmb3Igc2hvd1xyXG4gICAgZm9yKHZhciBwcm9wIGluIGdsb2JhbF9iZWFjb25zKSB7XHJcbiAgICAgIGlmKCEgZ2xvYmFsX2JlYWNvbnNbcHJvcF1bXCJpc1JlZ2lzdGVyZWRcIl0pXHJcbiAgICAgIHtcclxuICAgICAgICBnbG9iYWxfbG9jYXRpb24ucHVzaChnbG9iYWxfYmVhY29uc1twcm9wXSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmKGdsb2JhbF9sb2NhdGlvbi5sZW5ndGggPj0gbWF4X2xvY2F0aW9uKVxyXG4gICAgICB7XHJcbiAgICAgICAgY29uc29sZS5sb2codGFnLCBcImxvY2F0aW9uIHJlYWNoIGxpbWl0PVwiLCBtYXhfbG9jYXRpb24pO1xyXG4gICAgICAgIC8vIHNvcnRpbmcgYnkgcnNzaSAgZ2V0U29ydE9yZGVyKHByb3ApXHJcbiAgICAgICAgZ2xvYmFsX3NvcnRpbmdfbG9jID0gZ2xvYmFsX2xvY2F0aW9uLnNvcnQoZ2V0U29ydE9yZGVyW1wicnNzaVwiXSk7XHJcbiAgICAgICAgZ2xvYmFsX3NvcnRpbmdfbG9jLmZvckVhY2goZnVuY3Rpb24obG9jX2xpc3QsIGluZGV4KXtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKHRhZywgXCJzb3J0ZWRfbG9jPVwiLCBsb2NfbGlzdCk7XHJcbiAgICAgICAgICBsb2NhdGlvbl9saXN0ID0gbG9jYXRpb25fbGlzdCArIGxvY19saXN0W1wibWFqb3JcIl0gKyBcIi1cIiArIGxvY19saXN0W1wibWlub3JcIl0gKyBcclxuICAgICAgICAgIFwiOlwiICsgbG9jX2xpc3RbXCJsb2NhdGlvblwiXSArIFwiIFwiICsgbG9jX2xpc3RbXCJyc3NpXCJdICsgXCJkQm1cIiArIFwiOyBcIjtcclxuICAgICAgICB9KTtcclxuICAgICAgICBhbGVydCh0YWcgKyBsb2NhdGlvbl9saXN0KTtcclxuICAgICAgICByZXR1cm4gZ2xvYmFsX3NvcnRpbmdfbG9jO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gICovXG5cbiAgY29uc29sZS5sb2codGFnLCBcImdsb2JhbF9sb2NhdGlvbj1cIiwgZ2xvYmFsX2xvY2F0aW9uKTtcbiAgZ2xvYmFsX2xvY2F0aW9uLnNvcnQoc29ydEJ5UHJvcGVydHkoXCJyc3NpXCIpKTtcbiAgZ2xvYmFsX2xvY2F0aW9uLmZvckVhY2goZnVuY3Rpb24gKHNvcnRfbG9jLCBpbmRleCkge1xuICAgIGNvbnNvbGUubG9nKHRhZywgXCIjIyMgc29ydF9pZD1cIiwgaW5kZXgsIFwiZGF0YT1cIiwgc29ydF9sb2MpO1xuICAgIGxvY2F0aW9uX2xpc3QgPSBsb2NhdGlvbl9saXN0ICsgc29ydF9sb2NbXCJsb2NhdGlvblwiXSArIFwiIG1ham9yPVwiICsgc29ydF9sb2NbXCJtYWpvclwiXSArIFwiIG1pbm9yPVwiICsgc29ydF9sb2NbXCJtaW5vclwiXSArXG4gICAgXCIgcnNzaT1cIiArIHNvcnRfbG9jW1wicnNzaVwiXSArIFwiOyBcIjtcbiAgfSk7XG4gIGFsZXJ0KHRhZyArIFwic29ydGVkX2xvYz1cIiArIGxvY2F0aW9uX2xpc3QpO1xuICByZXR1cm4gZ2xvYmFsX2xvY2F0aW9uO1xufVxuXG5mdW5jdGlvbiBtZDVfaGFzaChoYXNoX3NlZWQpIHtcbiAgdmFyIHRhZyA9IFwibWQ1X2hhc2hcIjtcbiAgdmFyIG15X21kNSA9IFRpLlV0aWxzLm1kNUhleERpZ2VzdChoYXNoX3NlZWQpO1xuICByZXR1cm4gbXlfbWQ1O1xufVxuXG5leHBvcnRzLmJlYWNvblN0YXJ0U2NhbiA9IGJlYWNvblN0YXJ0U2NhbjtcbmV4cG9ydHMuYmVhY29uU3RvcFNjYW4gPSBiZWFjb25TdG9wU2NhbjtcbmV4cG9ydHMuZ2V0TG9jYXRpb25MaXN0ID0gZ2V0TG9jYXRpb25MaXN0OyJdLCJzb3VyY2VSb290IjoiZDpcXEdJQU5UXFx3dzJcXGJjLWRlYnVnXFxpbmV0dGliZWFjb24ifQ==
